<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Josh/UX | Senior QA Engineer</title>
    <meta
      name="description"
      content="Senior SDET and QA Engineer portfolio focused on automation, CI/CD quality strategy, and production-ready delivery."
    />
    <link rel="canonical" href="https://joshbarteaux.com/" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.svg" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://joshbarteaux.com/" />
    <meta property="og:title" content="Josh/UX | Senior QA Engineer" />
    <meta
      property="og:description"
      content="Break the Code. Not the User. Senior SDET and QA Engineer specializing in automation and quality systems."
    />
    <meta
      property="og:image"
      content="https://joshbarteaux.com/og-preview.svg"
    />
    <meta property="og:image:alt" content="Josh Barteaux portfolio preview" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Josh/UX | Senior QA Engineer" />
    <meta
      name="twitter:description"
      content="Break the Code. Not the User. Senior SDET and QA Engineer specializing in automation and quality systems."
    />
    <meta
      name="twitter:image"
      content="https://joshbarteaux.com/og-preview.svg"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              qa: {
                dark: "#0f172a",
                light: "#f8fafc",
                accent: "#38bdf8", // Light blue
                pass: "#22c55e", // Green
                fail: "#ef4444", // Red
                warn: "#eab308", // Yellow
              },
            },
            fontFamily: {
              mono: [
                "ui-monospace",
                "SFMono-Regular",
                "Menlo",
                "Monaco",
                "Consolas",
                "Liberation Mono",
                "Courier New",
                "monospace",
              ],
            },
          },
        },
      };
    </script>
    <style>
      /* Custom scrollbar for terminal */
      .terminal-scroll::-webkit-scrollbar {
        width: 8px;
      }
      .terminal-scroll::-webkit-scrollbar-track {
        background: #1e293b;
      }
      .terminal-scroll::-webkit-scrollbar-thumb {
        background: #475569;
        border-radius: 4px;
      }
      .terminal-scroll::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }

      .cursor-blink {
        animation: blink 1s step-end infinite;
      }
      @keyframes blink {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0;
        }
      }

      .glass-card {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.5);
      }

      #demo-grid.docs-wide {
        grid-template-columns: 1fr;
        grid-template-rows: minmax(0, 1fr) auto;
      }
      #demo-grid.docs-wide #demo-left-pane {
        border-right: none;
        border-bottom: 1px solid #334155;
      }
      #demo-grid.docs-wide #demo-right-pane {
        border-top: 1px solid #1f2937;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        padding: 1rem;
      }
      #demo-grid.docs-wide #demo-logs {
        height: auto;
        max-height: 180px;
        overflow-y: auto;
        padding-bottom: 0;
      }

      @media (max-width: 768px) {
        #demo-content {
          max-height: 90vh;
        }
        #demo-grid {
          grid-template-columns: 1fr;
          grid-template-rows: minmax(0, 1fr) minmax(0, 1fr);
          height: calc(100vh - 180px);
        }
        #demo-left-pane,
        #demo-right-pane {
          border-right: none;
          border-bottom: 1px solid #334155;
          max-height: 40vh;
          overflow-y: auto;
        }
        #demo-right-pane {
          border-bottom: none;
        }
        #demo-logs {
          height: auto;
          max-height: none;
          overflow-y: visible;
          padding-bottom: 0;
        }

        #demo-grid.docs-wide {
          grid-template-rows: minmax(0, 1fr) auto;
        }
        #demo-grid.docs-wide #demo-left-pane {
          max-height: none;
          overflow-y: auto;
        }
        #demo-grid.docs-wide #demo-right-pane {
          max-height: none;
          height: auto;
          overflow-y: visible;
          border-bottom: none;
          border-top: 1px solid #1f2937;
        }
        #demo-grid.docs-wide #demo-logs {
          max-height: none;
          overflow-y: visible;
        }

        #demo-grid.docs-manual {
          grid-template-rows: minmax(0, 1fr) auto;
        }
        #demo-grid.docs-manual #demo-left-pane {
          max-height: none;
          overflow-y: auto;
        }
        #demo-grid.docs-manual #demo-right-pane {
          max-height: none;
          height: auto;
          overflow-y: visible;
          border-bottom: none;
          border-top: 1px solid #1f2937;
          padding: 0.75rem;
        }
        #demo-grid.docs-manual #demo-logs {
          max-height: none;
          overflow-y: visible;
        }
        #demo-grid.docs-manual #docs-document {
          padding-top: 0.4rem;
          padding-bottom: 0.4rem;
          font-size: 0.75rem;
        }
        #demo-grid.docs-manual #docs-document-label {
          font-size: 0.6rem;
        }
        #demo-grid.docs-manual #docs-format-md,
        #demo-grid.docs-manual #docs-format-csv,
        #demo-grid.docs-manual #docs-format-json,
        #demo-grid.docs-manual #docs-copy,
        #demo-grid.docs-manual #docs-download {
          padding: 0.35rem 0.6rem;
          font-size: 0.65rem;
        }
        #demo-grid.docs-manual .space-y-3 > :not([hidden]) ~ :not([hidden]) {
          margin-top: 0.5rem;
        }
      }

      /* Theme Toggle (Light/Dark) */
      html.theme-dark body {
        background-color: #0b1220;
        color: #e2e8f0;
      }
      html.theme-dark .bg-white {
        background-color: #0f172a !important;
      }
      html.theme-dark .bg-white\/90 {
        background-color: rgba(15, 23, 42, 0.9) !important;
      }
      html.theme-dark .bg-white\/80 {
        background-color: rgba(15, 23, 42, 0.8) !important;
      }
      html.theme-dark .bg-white\/70 {
        background-color: rgba(15, 23, 42, 0.7) !important;
      }
      html.theme-dark .bg-slate-50 {
        background-color: #0b1220 !important;
      }
      html.theme-dark .bg-slate-100 {
        background-color: #111827 !important;
      }
      html.theme-dark .bg-slate-200 {
        background-color: #1f2937 !important;
      }
      html.theme-dark .text-slate-900 {
        color: #f1f5f9 !important;
      }
      html.theme-dark .text-slate-800 {
        color: #e2e8f0 !important;
      }
      html.theme-dark .text-slate-700 {
        color: #cbd5f5 !important;
      }
      html.theme-dark .text-slate-600 {
        color: #94a3b8 !important;
      }
      html.theme-dark .text-slate-500 {
        color: #94a3b8 !important;
      }
      html.theme-dark .border-slate-200 {
        border-color: #1e293b !important;
      }
      html.theme-dark .border-slate-100 {
        border-color: #1e293b !important;
      }

      /* Minimal UI pass */
      :root {
        --ui-bg: #f6f7f9;
        --ui-surface: #ffffff;
        --ui-border: #e5e7eb;
        --ui-text: #0f172a;
        --ui-muted: #475569;
      }

      html,
      body {
        margin: 0 !important;
        padding-top: 0 !important;
      }

      body {
        background: var(--ui-bg) !important;
        color: var(--ui-text) !important;
      }

      nav.fixed.w-full {
        background: rgba(255, 255, 255, 0.96) !important;
        backdrop-filter: none !important;
        box-shadow: 0 1px 0 rgba(15, 23, 42, 0.08) !important;
      }

      section[id] {
        padding-top: clamp(2.25rem, 5vw, 4rem) !important;
        padding-bottom: clamp(2.25rem, 5vw, 4rem) !important;
      }

      .bg-gradient-to-r,
      .bg-gradient-to-tr {
        background-image: none !important;
      }

      .rounded-2xl {
        border-radius: 0.875rem !important;
      }

      .rounded-xl {
        border-radius: 0.75rem !important;
      }

      .shadow-sm,
      .shadow,
      .shadow-lg,
      .shadow-xl,
      .shadow-2xl {
        box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
      }

      .bg-white,
      .bg-white\/90,
      .bg-white\/80,
      .bg-white\/70 {
        background-color: var(--ui-surface) !important;
      }

      .border-slate-100,
      .border-slate-200 {
        border-color: var(--ui-border) !important;
      }

      .text-slate-600,
      .text-slate-500 {
        color: var(--ui-muted);
      }

      h1,
      h2,
      h3 {
        letter-spacing: -0.015em;
      }

      p {
        line-height: 1.65;
      }

      .glass-card {
        background: #ffffff !important;
        backdrop-filter: none !important;
        border: 1px solid var(--ui-border) !important;
      }

    </style>
  </head>
  <body class="bg-slate-50 text-slate-800 antialiased font-sans">
    <!-- Navigation -->
    <nav
      class="fixed top-0 left-0 w-full z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex-shrink-0 flex items-center gap-2">
            <span class="inline-flex w-8 h-8" aria-hidden="true">
              <svg
                viewBox="0 0 40 40"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="w-8 h-8"
              >
                <rect width="40" height="40" rx="10" fill="#283C6E" />
                <path
                  d="M4.98698 24.5312L4.98698 27.8646L11.6536 27.8646L11.6536 24.5312L8.32031 24.5312L4.98698 24.5312ZM8.32031 24.5312L11.6536 24.5312L11.6536 11.6406L8.32031 11.6406L4.98698 11.6406L4.98698 24.5312L8.32031 24.5312Z"
                  fill="white"
                />
                <path
                  d="M35.0911 15.3516L35.0911 12.0182L28.4245 12.0182L28.4245 15.3516L31.7578 15.3516L35.0911 15.3516ZM31.7578 28.3594L35.0911 28.3594L35.0911 15.3516L31.7578 15.3516L28.4245 15.3516L28.4245 28.3594L31.7578 28.3594Z"
                  fill="white"
                />
                <path d="M11.6816 8.22925H23.4003" stroke="white" stroke-width="6.66667" />
                <path d="M16.7031 31.6667L28.4218 31.6667" stroke="white" stroke-width="6.66667" />
                <circle cx="20" cy="19.8438" r="4.6875" fill="#283C6E" />
                <circle cx="20" cy="19.8438" r="4.6875" fill="white" />
              </svg>
            </span>
            <span
              class="font-bold text-xl tracking-tight text-slate-900"
              style="color: #111827 !important; font-weight: 800;"
              >JOSH<span class="text-qa-accent" style="color: #6b7280 !important;">/</span>BARTEAUX</span
            >
          </div>
          <div class="hidden md:flex items-center space-x-6">
            <a
              href="#home"
              class="text-slate-600 hover:text-qa-accent transition-colors font-medium"
              >Home</a
            >
            <a
              href="#expertise"
              class="text-slate-600 hover:text-qa-accent transition-colors font-medium"
              >Expertise</a
            >
            <a
              href="#projects"
              class="text-slate-600 hover:text-qa-accent transition-colors font-medium"
              >Projects</a
            >
            <a
              href="#dashboard"
              class="hidden text-slate-600 hover:text-qa-accent transition-colors font-medium"
              >Dashboard</a
            >
            <a
              href="#process"
              class="text-slate-600 hover:text-qa-accent transition-colors font-medium"
              >Process</a
            >
            <button
              id="theme-toggle"
              class="w-10 h-10 rounded-full border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition flex items-center justify-center"
              aria-label="Toggle theme"
            >
              <i id="theme-icon" class="fa-solid fa-moon"></i>
            </button>          </div>
          <!-- Mobile menu button -->
          <div class="md:hidden flex items-center">
            <button
              id="mobile-menu-btn"
              class="text-slate-600 hover:text-slate-900 focus:outline-none"
            >
              <i class="fa-solid fa-bars text-2xl"></i>
            </button>
          </div>
        </div>
      </div>
      <!-- Mobile Menu -->
      <div
        id="mobile-menu"
        class="hidden md:hidden bg-white border-b border-slate-200"
      >
        <div class="px-4 pt-2 pb-4 space-y-1">
          <button
            id="theme-toggle-mobile"
            class="w-full flex items-center justify-between px-3 py-2 rounded-md border border-slate-200 text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition"
            aria-label="Toggle theme"
          >
            <span class="font-medium">Theme</span>
            <i id="theme-icon-mobile" class="fa-solid fa-moon"></i>
          </button>
          <a
            href="#home"
            class="block px-3 py-2 text-slate-600 hover:bg-slate-50 hover:text-qa-accent rounded-md"
            >Home</a
          >
          <a
            href="#expertise"
            class="block px-3 py-2 text-slate-600 hover:bg-slate-50 hover:text-qa-accent rounded-md"
            >Expertise</a
          >
          <a
            href="#projects"
            class="block px-3 py-2 text-slate-600 hover:bg-slate-50 hover:text-qa-accent rounded-md"
            >Projects</a
          >
          <a
            href="#dashboard"
            class="hidden block px-3 py-2 text-slate-600 hover:bg-slate-50 hover:text-qa-accent rounded-md"
            >Dashboard</a
          >
          <a
            href="#process"
            class="block px-3 py-2 text-slate-600 hover:bg-slate-50 hover:text-qa-accent rounded-md"
            >Process</a
          >
          <a href="#contact" class="block px-3 py-2 text-qa-accent font-bold"
            >Contact</a
          >
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section
      id="home"
      class="pt-24 pb-12 md:pt-32 md:pb-24 overflow-hidden relative" style="margin-top: 60px;"
    >
      <div class="absolute inset-0 -z-10 opacity-20">
        <div
          class="absolute top-0 right-0 w-96 h-96 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl animate-blob"
        ></div>
        <div
          class="absolute top-0 left-0 w-96 h-96 bg-cyan-300 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-2000"
        ></div>
      </div>

      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-2 gap-12 items-center"
      >
        <!-- Hero Text -->
        <div class="space-y-6">
          <a
            href="#contact"
            class="inline-flex items-center px-3 py-1 rounded-full bg-blue-50 text-blue-600 text-sm font-semibold border border-blue-100 hover:bg-blue-100 transition"
          >
            <span
              class="w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"
            ></span>
            Available
          </a>
          <h1
            class="text-4xl md:text-6xl font-bold text-slate-900 leading-tight"
          >
            Break the Code.<br />
            <span
              class="text-slate-900" style="color: rgba(15, 23, 42, 0.4);"
              >Not the User.</span
            >
          </h1>
          <p class="text-lg text-slate-600 max-w-lg">
            Senior SDET & QA Engineer specializing in automated testing
            frameworks, CI/CD integration, and performance optimization. I break
            code so your users don't have to.
          </p>
          <div class="flex flex-wrap gap-4 pt-4">
            <a
              href="#projects"
              class="px-6 py-3 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition shadow-lg hover:shadow-xl flex items-center gap-2"
            >
              View Projects <i class="fa-solid fa-arrow-right text-sm"></i>
            </a>
            <a
              href="https://www.github.com/murdadrum"
              target="_blank"
              class="px-6 py-3 bg-white text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition shadow-sm flex items-center gap-2"
            >
              <i class="fa-brands fa-github"></i> GitHub
            </a>
          </div>
        </div>

        <!-- Hero Terminal / Interactive Element -->
        <div class="relative group perspective-1000">
          <div
            class="absolute -inset-1 bg-gradient-to-r from-blue-600 to-cyan-400 rounded-xl blur opacity-25 group-hover:opacity-50 transition duration-1000"
          ></div>
          <div
            class="relative bg-slate-900 rounded-xl shadow-2xl overflow-hidden border border-slate-700 font-mono text-sm leading-relaxed"
          >
            <!-- Terminal Header -->
            <div
              class="flex items-center justify-between px-4 py-2 bg-slate-800 border-b border-slate-700"
            >
              <div class="flex space-x-2">
                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                <div class="w-3 h-3 rounded-full bg-green-500"></div>
              </div>
              <div class="text-slate-400 text-xs">tests/suite.spec.ts</div>
            </div>
            <!-- Terminal Body -->
            <div
              class="p-4 h-80 overflow-y-auto terminal-scroll text-slate-300"
              id="terminal-output"
            >
              <!-- Content injected via JS -->
            </div>
            <!-- Status Bar -->
            <div
              class="px-4 py-2 bg-slate-800 border-t border-slate-700 flex justify-between text-xs font-semibold"
              id="terminal-status"
            >
              <span class="text-blue-400"
                ><i class="fa-solid fa-spinner fa-spin mr-1"></i> RUNNING</span
              >
              <span class="text-slate-400">Time: 0.0s</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tech Stack / Expertise -->
    <section id="expertise" class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-3xl font-bold text-slate-900">Technical Arsenal</h2>
          <p class="mt-4 text-slate-600 max-w-2xl mx-auto">
            My toolkit encompasses the entire STLC, from requirement analysis to
            automated deployment gates.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <!-- Automation (Chips) -->
          <div
            class="p-6 rounded-2xl bg-slate-50 hover:bg-blue-50 hover:shadow-lg transition-all border border-slate-100 group relative overflow-hidden"
          >
            <div class="flex items-center gap-4 mb-3">
              <div
                class="w-12 h-12 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform"
              >
                <i class="fa-solid fa-robot"></i>
              </div>
              <h3 class="text-xl font-bold text-slate-800">Playwright</h3>
            </div>
            <div class="space-y-3">
              <button
                onclick="openDemo('automation')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-blue-300 hover:bg-blue-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Crossbrowser E2E
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('automation-chat-assistant')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-blue-300 hover:bg-blue-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Chat Assistant
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('automation-form-submit')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-blue-300 hover:bg-blue-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Form Submit
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('automation-modals')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-blue-300 hover:bg-blue-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Modals
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('automation-links-downloads')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-blue-300 hover:bg-blue-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Links + Downloads
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
            </div>
          </div>

          <!-- Emulation -->
          <div
            class="p-6 rounded-2xl bg-slate-50 hover:bg-purple-50 hover:shadow-lg transition-all border border-slate-100 group relative overflow-hidden"
          >
            <div class="flex items-center gap-4 mb-3">
              <div
                class="w-12 h-12 rounded-lg bg-purple-100 text-purple-600 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform"
              >
                <i class="fa-solid fa-location-crosshairs"></i>
              </div>
              <h3 class="text-xl font-bold text-slate-800">Emulation</h3>
            </div>
            <div class="space-y-3">
              <button
                onclick="openDemo('automation-emulation')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-purple-300 hover:bg-purple-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Mobile
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('automation-emulation')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-purple-300 hover:bg-purple-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Geolocation
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('automation-emulation')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-purple-300 hover:bg-purple-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Design
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('automation-emulation')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-purple-300 hover:bg-purple-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Offline
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
            </div>
          </div>

          <!-- CI/CD & DevOps (Clickable) -->
          <div
            class="p-6 rounded-2xl bg-slate-50 hover:bg-orange-50 hover:shadow-lg transition-all border border-slate-100 group relative overflow-hidden"
          >
            <div
              class="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity text-orange-500 text-xs font-bold bg-orange-100 px-2 py-1 rounded-full"
            >
              <i class="fa-solid fa-chart-line mr-1"></i> DEMO
            </div>
            <div class="flex items-center gap-4 mb-3">
              <div
                class="w-12 h-12 rounded-lg bg-orange-100 text-orange-600 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform"
              >
                <i class="fa-solid fa-infinity"></i>
              </div>
              <h3 class="text-xl font-bold text-slate-800">
                DevOps & CI/CD
              </h3>
            </div>
            <div class="space-y-2">
              <div class="inline-flex w-full items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700">
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Jenkins Pipelines
                </span>
              </div>
              <button
                onclick="openDemo('devops')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-orange-300 hover:bg-orange-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  GitHub Actions
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <div class="inline-flex w-full items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700">
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Docker / Kubernetes
                </span>
              </div>
              <div class="inline-flex w-full items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700">
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  AWS CloudWatch
                </span>
              </div>
            </div>
            <div
              class="mt-4 rounded-lg border border-slate-200 bg-white/70 px-3 py-2 text-xs text-slate-600 flex items-center gap-2"
              id="deploy-status"
            >
              <span class="inline-flex items-center gap-2 font-semibold text-slate-700">
                <span
                  class="w-2 h-2 rounded-full bg-slate-300"
                  id="deploy-dot"
                ></span>
                Latest Deploy:
              </span>
              <span id="deploy-text">Loading...</span>
              <a
                id="deploy-link"
                href="https://github.com/murdadrum/QAPI/actions/workflows/deploy.yml"
                target="_blank"
                class="ml-auto text-slate-500 hover:text-slate-900 underline"
              >
                Details
              </a>
            </div>
            <img
              class="mt-3 h-5"
              src="https://github.com/murdadrum/QAPI/actions/workflows/deploy.yml/badge.svg"
              alt="Deploy to GitHub Pages status"
            />
          </div>

          <!-- Documentation -->
          <div
            class="p-6 rounded-2xl bg-slate-50 hover:bg-emerald-50 hover:shadow-lg transition-all border border-slate-100 group"
          >
            <div class="flex items-center gap-4 mb-3">
              <div
                class="w-12 h-12 rounded-lg bg-emerald-100 text-emerald-600 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform"
              >
                <i class="fa-solid fa-code"></i>
              </div>
              <h3 class="text-xl font-bold text-slate-800">Documentation</h3>
            </div>
            <div class="space-y-2">
              <button
                onclick="openDemo('docs-requirements')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-emerald-300 hover:bg-emerald-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Requirements
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('docs-user-stories')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-emerald-300 hover:bg-emerald-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  User Stories
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('docs-rtm')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-emerald-300 hover:bg-emerald-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  RTM
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('docs-test-scripts')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-emerald-300 hover:bg-emerald-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Test Scripts
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('docs-bug-tracking')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-emerald-300 hover:bg-emerald-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Bug Tracking
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <button
                onclick="openDemo('docs-uat')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-emerald-300 hover:bg-emerald-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  UAT
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              <!-- Retrospectives chip hidden -->
              <!--
              <button
                onclick="openDemo('docs-retrospectives')"
                class="w-full inline-flex items-center justify-between gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-2 text-sm font-semibold text-slate-700 hover:border-emerald-300 hover:bg-emerald-50 transition"
              >
                <span class="inline-flex items-center gap-2">
                  <i class="fa-solid fa-circle-check text-green-500 text-xs"></i>
                  Retrospectives
                </span>
                <i class="fa-solid fa-arrow-up-right-from-square text-slate-400 text-xs"></i>
              </button>
              -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Projects -->
    <section id="projects" class="py-20 bg-slate-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div
          class="flex flex-col md:flex-row justify-between items-end mb-12 gap-4"
        >
          <div>
            <h2 class="text-3xl font-bold text-slate-900">Featured Projects</h2>
            <p class="mt-2 text-slate-600">
              Real-world examples of automated frameworks and quality
              strategies.
            </p>
          </div>
          <div class="flex gap-2 flex-wrap">
            <button
              onclick="filterProjects('all')"
              class="project-filter active-filter px-4 py-2 rounded-full text-sm font-medium bg-slate-900 text-white transition"
            >
              All
            </button>
            <button
              onclick="filterProjects('automation')"
              class="project-filter px-4 py-2 rounded-full text-sm font-medium bg-white text-slate-600 border border-slate-200 hover:bg-slate-100 transition"
            >
              Automation
            </button>
            <button
              onclick="filterProjects('performance')"
              class="project-filter px-4 py-2 rounded-full text-sm font-medium bg-white text-slate-600 border border-slate-200 hover:bg-slate-100 transition"
            >
              Performance
            </button>
            <button
              onclick="filterProjects('webapps')"
              class="project-filter px-4 py-2 rounded-full text-sm font-medium bg-white text-slate-600 border border-slate-200 hover:bg-slate-100 transition"
            >
              Web Apps
            </button>
          </div>
        </div>

        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
          id="projects-grid"
        >
          <!-- Project 1 -->
          <div
            class="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-200 hover:shadow-xl transition-all duration-300 group flex flex-col h-full"
            data-category="automation"
          >
            <div
              class="h-48 bg-slate-800 relative overflow-hidden flex items-center justify-center flex-shrink-0"
            >
              <div
                class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"
              ></div>
              <i
                class="fa-solid fa-bezier-curve text-6xl text-slate-600 group-hover:text-blue-400 transition-colors"
              ></i>
              <div
                class="absolute top-4 right-4 bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded"
              >
                Figma
              </div>
            </div>
            <div class="p-6 flex flex-col flex-grow">
              <h3 class="text-xl font-bold text-slate-900 mb-2">
                VennDiachrome
              </h3>
              <p class="text-slate-600 text-sm mb-4">
                GitHub tech stack color coding.
              </p>

              <div class="space-y-3 mb-6 flex-grow">
                <!-- Metric 1 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Prototype Depth</span>
                  <span class="font-bold text-slate-800">20+ Screens</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-1.5">
                  <div
                    class="bg-blue-500 h-1.5 rounded-full"
                    style="width: 88%"
                  ></div>
                </div>
                <!-- Metric 2 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Iteration Cadence</span>
                  <span class="font-bold text-green-600">Weekly Updates</span>
                </div>
              </div>

              <div class="flex gap-2 text-sm text-slate-500 mb-6">
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Figma</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Prototype</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >UX</span
                >
              </div>

              <!-- Buttons Area -->
              <div class="grid grid-cols-2 gap-3 mt-auto">
                <a
                  href="https://venndiachrome.figma.site"
                  target="_blank"
                  class="flex items-center justify-center gap-2 py-2 px-3 rounded-lg border border-slate-200 text-slate-700 hover:bg-slate-50 hover:text-slate-900 transition text-sm font-semibold"
                >
                  <i class="fa-brands fa-figma"></i> Figma
                </a>
                <a
                  href="https://venndiachrome.figma.site"
                  target="_blank"
                  data-demo-url="https://venndiachrome.figma.site"
                  class="project-demo flex items-center justify-center gap-2 py-2 px-3 rounded-lg bg-slate-900 text-white hover:bg-slate-800 transition text-sm font-semibold"
                >
                  <i class="fa-solid fa-play"></i> Demo
                </a>
              </div>
            </div>
          </div>

          <!-- Project 2 -->
          <div
            class="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-200 hover:shadow-xl transition-all duration-300 group flex flex-col h-full"
            data-category="webapps"
          >
            <!-- Image/Icon area -->
            <div
              class="h-48 bg-slate-800 relative overflow-hidden flex items-center justify-center flex-shrink-0"
            >
              <div
                class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"
              ></div>
              <i
                class="fa-solid fa-pen-ruler text-6xl text-slate-600 group-hover:text-amber-400 transition-colors"
              ></i>
              <div
                class="absolute top-4 right-4 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded"
              >
                Figma
              </div>
            </div>
            <div class="p-6 flex flex-col flex-grow">
              <h3 class="text-xl font-bold text-slate-900 mb-2">ProjecTiles</h3>
              <p class="text-slate-600 text-sm mb-4">
                Tactile grid for project presentations.
              </p>

              <div class="space-y-3 mb-6 flex-grow">
                <!-- Metric 1 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Prototype Depth</span>
                  <span class="font-bold text-slate-800">15+ Screens</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-1.5">
                  <div
                    class="bg-amber-500 h-1.5 rounded-full"
                    style="width: 80%"
                  ></div>
                </div>
                <!-- Metric 2 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Iteration Speed</span>
                  <span class="font-bold text-green-600">Weekly Updates</span>
                </div>
              </div>

              <div class="flex gap-2 text-sm text-slate-500 mb-6">
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Figma</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Prototype</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >UX</span
                >
              </div>

              <!-- Buttons Area -->
              <div class="grid grid-cols-2 gap-3 mt-auto">
                <a
                  href="#"
                  target="_blank"
                  class="flex items-center justify-center gap-2 py-2 px-3 rounded-lg border border-slate-200 text-slate-700 hover:bg-slate-50 hover:text-slate-900 transition text-sm font-semibold"
                >
                  <i class="fa-brands fa-github"></i> Code
                </a>
                <a
                  href="https://projectiles.figma.site/"
                  target="_blank"
                  data-demo-url="https://projectiles.figma.site/"
                  class="project-demo flex items-center justify-center gap-2 py-2 px-3 rounded-lg bg-slate-900 text-white hover:bg-slate-800 transition text-sm font-semibold"
                >
                  <i class="fa-solid fa-rocket"></i> Demo
                </a>
              </div>
            </div>
          </div>

          <!-- Project 3 -->
          <div
            class="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-200 hover:shadow-xl transition-all duration-300 group flex flex-col h-full"
            data-category="automation"
          >
            <div
              class="h-48 bg-slate-800 relative overflow-hidden flex items-center justify-center flex-shrink-0"
            >
              <div
                class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"
              ></div>
              <i
                class="fa-solid fa-comments text-6xl text-slate-600 group-hover:text-green-400 transition-colors"
              ></i>
              <div
                class="absolute top-4 right-4 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded"
              >
                Web App
              </div>
            </div>
            <div class="p-6 flex flex-col flex-grow">
              <h3 class="text-xl font-bold text-slate-900 mb-2">
                Promptly
              </h3>
              <p class="text-slate-600 text-sm mb-4">
                Rapid cinematic prompting for transctipts and voiceover.
              </p>

              <div class="space-y-3 mb-6 flex-grow">
                <!-- Metric 1 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Prompt Scenarios</span>
                  <span class="font-bold text-slate-800">50+ Templates</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-1.5">
                  <div
                    class="bg-green-500 h-1.5 rounded-full"
                    style="width: 86%"
                  ></div>
                </div>
                <!-- Metric 2 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Iteration Speed</span>
                  <span class="font-bold text-green-600">Real-time</span>
                </div>
              </div>

              <div class="flex gap-2 text-sm text-slate-500 mb-6">
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >AI</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Prompting</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Web</span
                >
              </div>

              <!-- Buttons Area -->
              <div class="grid grid-cols-2 gap-3 mt-auto">
                <a
                  href="https://promptly-779175721635.us-west1.run.app"
                  target="_blank"
                  class="flex items-center justify-center gap-2 py-2 px-3 rounded-lg border border-slate-200 text-slate-700 hover:bg-slate-50 hover:text-slate-900 transition text-sm font-semibold"
                >
                  <i class="fa-solid fa-arrow-up-right-from-square"></i> Open App
                </a>
                <a
                  href="https://promptly-779175721635.us-west1.run.app"
                  target="_blank"
                  data-demo-url="https://promptly-779175721635.us-west1.run.app"
                  class="project-demo flex items-center justify-center gap-2 py-2 px-3 rounded-lg bg-slate-900 text-white hover:bg-slate-800 transition text-sm font-semibold"
                >
                  <i class="fa-solid fa-rocket"></i> Demo
                </a>
              </div>
            </div>
          </div>

          <!-- Project 4 (Web App) -->
          <div
            class="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-200 hover:shadow-xl transition-all duration-300 group flex flex-col h-full"
            data-category="webapps"
          >
            <!-- Image/Icon area -->
            <div
              class="h-48 bg-slate-800 relative overflow-hidden flex items-center justify-center flex-shrink-0"
            >
              <div
                class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"
              ></div>
              <i
                class="fa-solid fa-layer-group text-6xl text-slate-600 group-hover:text-cyan-400 transition-colors"
              ></i>
              <div
                class="absolute top-4 right-4 bg-cyan-500 text-white text-xs font-bold px-2 py-1 rounded"
              >
                React + Node
              </div>
            </div>
            <div class="p-6 flex flex-col flex-grow">
              <h3 class="text-xl font-bold text-slate-900 mb-2">
                Test Data Generator
              </h3>
              <p class="text-slate-600 text-sm mb-4">
                Full-stack utility allowing QA teams to generate valid mock user
                data seeded directly into staging DBs.
              </p>

              <div class="space-y-3 mb-6 flex-grow">
                <!-- Metric 1 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Records Generated</span>
                  <span class="font-bold text-slate-800">1M+ / Month</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-1.5">
                  <div
                    class="bg-cyan-500 h-1.5 rounded-full"
                    style="width: 95%"
                  ></div>
                </div>
                <!-- Metric 2 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Time Saved</span>
                  <span class="font-bold text-green-600"
                    >5 hrs/week per dev</span
                  >
                </div>
              </div>

              <div class="flex gap-2 text-sm text-slate-500 mb-6">
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >React</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Node.js</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >MongoDB</span
                >
              </div>

              <!-- Buttons Area -->
              <div class="grid grid-cols-2 gap-3 mt-auto">
                <a
                  href="#"
                  target="_blank"
                  class="flex items-center justify-center gap-2 py-2 px-3 rounded-lg border border-slate-200 text-slate-700 hover:bg-slate-50 hover:text-slate-900 transition text-sm font-semibold"
                >
                  <i class="fa-brands fa-github"></i> Code
                </a>
                <a
                  href="https://mockapi-gen-779175721635.us-west1.run.app"
                  target="_blank"
                  data-demo-url="https://mockapi-gen-779175721635.us-west1.run.app"
                  class="project-demo flex items-center justify-center gap-2 py-2 px-3 rounded-lg bg-slate-900 text-white hover:bg-slate-800 transition text-sm font-semibold"
                >
                  <i class="fa-solid fa-rocket"></i> Demo
                </a>
              </div>
            </div>
          </div>

          <!-- Project 5 (Design Prototype) -->
          <div
            class="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-200 hover:shadow-xl transition-all duration-300 group flex flex-col h-full"
            data-category="performance"
          >
            <div
              class="h-48 bg-slate-800 relative overflow-hidden flex items-center justify-center flex-shrink-0"
            >
              <div
                class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"
              ></div>
              <i
                class="fa-brands fa-figma text-6xl text-slate-600 group-hover:text-pink-400 transition-colors"
              ></i>
              <div
                class="absolute top-4 right-4 bg-purple-500 text-white text-xs font-bold px-2 py-1 rounded"
              >Figma</div>
            </div>
            <div class="p-6 flex flex-col flex-grow">
              <h3 class="text-xl font-bold text-slate-900 mb-2">
                Figma QA/DMS
              </h3>
              <p class="text-slate-600 text-sm mb-4">
                CSS & json import/export single source of truth.
              </p>

              <div class="space-y-3 mb-6 flex-grow">
                <!-- Metric 1 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Components Reviewed</span>
                  <span class="font-bold text-slate-800">120+</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-1.5">
                  <div
                    class="bg-purple-500 h-1.5 rounded-full"
                    style="width: 85%"
                  ></div>
                </div>
                <!-- Metric 2 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Doc Coverage</span>
                  <span class="font-bold text-green-600">95%</span>
                </div>
              </div>

              <div class="flex gap-2 text-sm text-slate-500 mb-6">
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Figma</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >QA/DMS</span
                >
              </div>

              <!-- Buttons Area -->
              <div class="grid grid-cols-2 gap-3 mt-auto">
                <a
                  href="https://qadms.figma.site/"
                  target="_blank"
                  class="flex items-center justify-center gap-2 py-2 px-3 rounded-lg border border-slate-200 text-slate-700 hover:bg-slate-50 hover:text-slate-900 transition text-sm font-semibold"
                >
                  <i class="fa-brands fa-figma"></i> Figma
                </a>
                <a
                  href="https://qadms.figma.site/"
                  target="_blank"
                  data-demo-url="https://qadms.figma.site/"
                  class="project-demo flex items-center justify-center gap-2 py-2 px-3 rounded-lg bg-slate-900 text-white hover:bg-slate-800 transition text-sm font-semibold"
                >
                  <i class="fa-solid fa-play"></i> Demo
                </a>
              </div>
            </div>
          </div>

          <!-- Project 6 (Web App) -->
          <div
            class="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-200 hover:shadow-xl transition-all duration-300 group flex flex-col h-full"
            data-category="webapps"
          >
            <!-- Image/Icon area -->
            <div
              class="h-48 bg-slate-800 relative overflow-hidden flex items-center justify-center flex-shrink-0"
            >
              <div
                class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"
              ></div>
              <i
                class="fa-solid fa-music text-6xl text-slate-600 group-hover:text-pink-400 transition-colors"
              ></i>
              <div
                class="absolute top-4 right-4 bg-pink-500 text-white text-xs font-bold px-2 py-1 rounded"
              >
                Web App
              </div>
            </div>
            <div class="p-6 flex flex-col flex-grow">
              <h3 class="text-xl font-bold text-slate-900 mb-2">MuseBox</h3>
              <p class="text-slate-600 text-sm mb-4">
                Focused thumbnailing and cinematic storyboarding.
              </p>

              <div class="space-y-3 mb-6 flex-grow">
                <!-- Metric 1 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">Core Flow</span>
                  <span class="font-bold text-slate-800">Streamlined</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-1.5">
                  <div
                    class="bg-pink-500 h-1.5 rounded-full"
                    style="width: 78%"
                  ></div>
                </div>
                <!-- Metric 2 -->
                <div class="flex justify-between text-xs">
                  <span class="text-slate-500">UX Focus</span>
                  <span class="font-bold text-green-600">High</span>
                </div>
              </div>

              <div class="flex gap-2 text-sm text-slate-500 mb-6">
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Web</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >UI</span
                >
                <span
                  class="bg-slate-100 px-2 py-1 rounded border border-slate-200"
                  >Product</span
                >
              </div>

              <!-- Buttons Area -->
              <div class="grid grid-cols-2 gap-3 mt-auto">
                <a
                  href="#"
                  target="_blank"
                  class="flex items-center justify-center gap-2 py-2 px-3 rounded-lg border border-slate-200 text-slate-700 hover:bg-slate-50 hover:text-slate-900 transition text-sm font-semibold"
                >
                  <i class="fa-brands fa-github"></i> Code
                </a>
                <a
                  href="https://musebox-779175721635.us-west1.run.app"
                  target="_blank"
                  data-demo-url="https://musebox-779175721635.us-west1.run.app"
                  class="project-demo flex items-center justify-center gap-2 py-2 px-3 rounded-lg bg-slate-900 text-white hover:bg-slate-800 transition text-sm font-semibold"
                >
                  <i class="fa-solid fa-rocket"></i> Demo
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Dashboard -->
    <section id="dashboard" class="hidden py-8 sm:py-10 lg:py-12 bg-white border-t border-slate-100">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-3xl">
          <h2 class="text-3xl font-bold text-slate-900">ProjecTiles</h2>
          <p class="mt-2 text-slate-600">
            Embedded interactive prototype.
          </p>
        </div>
        <div class="mt-6">
          <div class="rounded-2xl border border-slate-200 bg-white shadow-lg p-2 sm:p-3">
            <iframe
              src="https://projectiles.figma.site/"
              title="ProjecTiles"
              loading="lazy"
              class="block w-full rounded-xl border border-slate-200 bg-white aspect-[4/5] sm:aspect-[4/3] lg:aspect-[16/10]"
            ></iframe>
          </div>
        </div>
      </div>
    </section>

    <!-- My QA Process (How I Work) -->
    <section id="process" class="py-20 bg-white border-t border-slate-100">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-3xl font-bold text-slate-900">
            The Quality Lifecycle
          </h2>
          <p class="mt-4 text-slate-600">
            How I ensure robust deliveries from planning to production.
          </p>
        </div>

        <div class="relative">
          <!-- Connector Line -->
          <div
            class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-slate-200 -z-10"
          ></div>

          <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <!-- Step 1 -->
            <div
              class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm text-center relative"
            >
              <div
                class="w-12 h-12 mx-auto bg-slate-900 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 border-4 border-white"
              >
                1
              </div>
              <h3 class="font-bold text-lg mb-2">Analysis</h3>
              <p class="text-sm text-slate-600">
                Reviewing acceptance criteria, identifying edge cases early, and
                defining the test strategy.
              </p>
            </div>

            <!-- Step 2 -->
            <div
              class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm text-center relative"
            >
              <div
                class="w-12 h-12 mx-auto bg-slate-900 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 border-4 border-white"
              >
                2
              </div>
              <h3 class="font-bold text-lg mb-2">Design & Automate</h3>
              <p class="text-sm text-slate-600">
                Writing modular scripts (Gherkin/Code), setting up data
                factories, and configuring CI pipelines.
              </p>
            </div>

            <!-- Step 3 -->
            <div
              class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm text-center relative"
            >
              <div
                class="w-12 h-12 mx-auto bg-slate-900 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 border-4 border-white"
              >
                3
              </div>
              <h3 class="font-bold text-lg mb-2">Execution</h3>
              <p class="text-sm text-slate-600">
                Running automated suites, performing exploratory testing for
                UI/UX nuances, and logging precise Jira tickets.
              </p>
            </div>

            <!-- Step 4 -->
            <div
              class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm text-center relative"
            >
              <div
                class="w-12 h-12 mx-auto bg-slate-900 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 border-4 border-white"
              >
                4
              </div>
              <h3 class="font-bold text-lg mb-2">Metrics & Report</h3>
              <p class="text-sm text-slate-600">
                Analyzing pass/fail rates, identifying flaky tests, and
                providing go/no-go decisions.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-slate-900 text-white">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-bold mb-6">Let's Build Together</h2>
        <p class="text-slate-400 mb-10">
          Whether you need a complete automation framework built from scratch or
          manual testing support for a launch.
        </p>

        <div
          class="bg-slate-800 rounded-2xl p-8 shadow-2xl text-left max-w-2xl mx-auto border border-slate-700"
        >
          <form id="contact-form" class="space-y-6">
            <input
              type="text"
              name="company"
              class="hidden"
              tabindex="-1"
              autocomplete="off"
              aria-hidden="true"
            />
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium text-slate-400 mb-2"
                  >Name</label
                >
                <input
                  type="text"
                  name="contact_name"
                  class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500 text-white transition"
                  placeholder="John Doe"
                  required
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-slate-400 mb-2"
                  >Email</label
                >
                <input
                  type="email"
                  name="contact_email"
                  class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500 text-white transition"
                  placeholder="john@example.com"
                  required
                />
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-400 mb-2"
                >Message</label
              >
              <textarea
                name="contact_message"
                class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500 text-white transition h-32"
                placeholder="Tell me about your project..."
                required
              ></textarea>
            </div>
            <button
              type="submit"
              id="contact-submit-btn"
              class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg transition shadow-lg hover:shadow-blue-500/20"
            >
              Send Message
            </button>
            <p
              id="contact-status"
              class="hidden text-sm font-medium"
              aria-live="polite"
            ></p>
          </form>
        </div>

        <div class="flex justify-center gap-6 mt-12">
          <a
            href="https://www.linkedin.com/in/joshbarteaux"
            target="_blank"
            class="text-slate-400 hover:text-white transition text-2xl"
            ><i class="fa-brands fa-linkedin"></i
          ></a>
          <a
            href="https://www.github.com/murdadrum"
            target="_blank"
            class="text-slate-400 hover:text-white transition text-2xl"
            ><i class="fa-brands fa-github"></i
          ></a>
          <a
            href="https://www.figma.com/@joshux"
            target="_blank"
            class="text-slate-400 hover:text-white transition text-2xl"
            ><i class="fa-brands fa-figma"></i
          ></a>
          <a
            href="assets/ats-resume-placeholder.txt"
            download="Josh-Barteaux-ATS-Resume.txt"
            class="hidden text-slate-300 hover:text-white transition inline-flex items-center justify-center h-8 w-12 border border-slate-400 rounded-md text-[0.65rem] font-bold tracking-wider leading-none"
            title="Download ATS Resume"
          >
            ATS
          </a>
        </div>
        <p class="text-slate-600 text-sm mt-8">
          &copy; 2026 Josh Barteaux. Get Up and Do Something LLC
        </p>
      </div>
    </section>

    <!-- AI Chat Widget -->
    <div
      id="chat-widget"
      class="hidden fixed bottom-6 right-6 z-50 flex flex-col items-end font-sans"
    >
      <!-- Chat Window -->
      <div
        id="chat-window"
        class="hidden bg-white w-80 md:w-96 rounded-2xl shadow-2xl border border-slate-200 overflow-hidden mb-4 transform transition-all duration-300 origin-bottom-right"
      >
        <!-- Header -->
        <div class="bg-slate-900 p-4 flex justify-between items-center">
          <div class="flex items-center gap-3">
            <div
              class="w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-cyan-400 flex items-center justify-center"
            >
              <i class="fa-solid fa-robot text-white text-sm"></i>
            </div>
            <div>
              <h4 class="text-white font-bold text-sm">Aime</h4>
              <p class="text-slate-400 text-xs flex items-center gap-1">
                <span class="w-2 h-2 rounded-full bg-green-500"></span> Online
              </p>
            </div>
          </div>
          <button
            id="close-chat"
            class="text-slate-400 hover:text-white transition"
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <!-- Messages Area -->
        <div
          id="chat-messages"
          class="h-80 overflow-y-auto p-4 bg-slate-50 space-y-4"
        >
          <!-- Initial Bot Message -->
          <div class="flex gap-3">
            <div
              class="w-8 h-8 rounded-full bg-blue-100 flex-shrink-0 flex items-center justify-center text-blue-600 text-xs"
            >
              <i class="fa-solid fa-robot"></i>
            </div>
            <div
              class="bg-white p-3 rounded-2xl rounded-tl-none border border-slate-100 shadow-sm text-sm text-slate-600"
            >
              Hi! I'm an AI assistant trained on Josh's portfolio. Ask me about
              skills, specific projects, or availability!
            </div>
          </div>
        </div>

        <!-- Input Area -->
        <div class="p-4 bg-white border-t border-slate-100">
          <form id="chat-form" class="flex gap-2">
            <input
              type="text"
              id="chat-input"
              class="flex-1 bg-slate-50 border border-slate-200 rounded-full px-4 py-2 text-sm focus:outline-none focus:border-blue-500 transition"
              placeholder="Ask a question..."
              autocomplete="off"
            />
            <button
              type="submit"
              class="w-10 h-10 rounded-full bg-slate-900 text-white hover:bg-slate-800 transition flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <i class="fa-solid fa-paper-plane text-xs"></i>
            </button>
          </form>
        </div>
      </div>

      <!-- Toggle Button -->
      <button
        id="chat-toggle"
        class="w-14 h-14 rounded-full bg-blue-600 text-white shadow-lg hover:bg-blue-500 hover:scale-105 transition-all duration-300 flex items-center justify-center text-2xl group"
      >
        <i class="fa-solid fa-message group-hover:hidden"></i>
        <i class="fa-solid fa-chevron-up hidden group-hover:block"></i>
      </button>
    </div>

    <!-- Demo Modal Overlay -->
    <div
      id="demo-modal"
      class="fixed inset-0 z-[60] hidden bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-slate-900 w-full max-w-4xl rounded-xl shadow-2xl border border-slate-700 overflow-hidden transform scale-95 transition-transform duration-300"
        id="demo-content"
      >
        <!-- Modal Header -->
        <div
          class="flex items-center justify-between px-6 py-4 border-b border-slate-700 bg-slate-800"
        >
          <div class="flex items-center gap-3">
            <span
              class="text-sm font-mono text-slate-300 font-bold"
              id="demo-title"
              >Test Runner</span
            >
          </div>
          <button
            onclick="closeDemo()"
            class="text-slate-400 hover:text-white transition"
          >
            <i class="fa-solid fa-xmark text-xl"></i>
          </button>
        </div>

        <!-- Modal Body (Split View) -->
            <div class="grid md:grid-cols-2 h-[500px]" id="demo-grid">
          <!-- Code/Dashboard View -->
          <div
            class="bg-slate-900 p-6 border-r border-slate-700 overflow-y-auto font-mono text-sm leading-relaxed"
            id="demo-left-pane"
          >
            <div class="text-slate-500 mb-4">// tests/checkout.spec.ts</div>
            <div id="demo-code" class="text-blue-300 whitespace-pre"></div>
          </div>

          <!-- Execution Log -->
          <div
            class="bg-slate-950 p-6 font-mono text-sm relative"
            id="demo-right-pane"
          >
            <div
              id="demo-right-header"
              class="text-slate-500 mb-4 border-b border-slate-800 pb-2 flex justify-between"
            >
              <span id="demo-right-title">Console Output</span>
              <span id="demo-status" class="text-blue-500"
                ><i class="fa-solid fa-circle-notch fa-spin"></i> Idle</span
              >
            </div>
            <div
              id="demo-logs"
              class="space-y-2 h-[400px] overflow-y-auto terminal-scroll pb-10"
            >
              <!-- Logs inject here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Project Demo Modal (iframe) -->
    <div
      id="project-demo-modal"
      class="fixed inset-0 z-[60] hidden bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-slate-900 w-full max-w-5xl rounded-xl shadow-2xl border border-slate-700 overflow-hidden transform scale-95 transition-transform duration-300"
        id="project-demo-content"
      >
        <div
          class="flex items-center justify-between px-6 py-4 border-b border-slate-700 bg-slate-800"
        >
          <div class="flex items-center gap-3">
            <span
              class="text-sm font-mono text-slate-300 font-bold"
              id="project-demo-title"
              >Project Demo</span
            >
          </div>
          <div class="flex items-center gap-3">
            <a
              id="project-demo-external"
              href="#"
              target="_blank"
              class="text-xs font-semibold text-slate-300 hover:text-white transition border border-slate-600 rounded px-2 py-1"
            >
              Open in New Tab
            </a>
            <button
              onclick="closeProjectDemo()"
              class="text-slate-400 hover:text-white transition"
            >
              <i class="fa-solid fa-xmark text-xl"></i>
            </button>
          </div>
        </div>
        <div class="bg-black h-[70vh]" id="project-demo-frame">
          <iframe
            id="project-demo-iframe"
            class="w-full h-full"
            src=""
            title="Project Demo"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      // ... existing mobile menu script ...
      // Mobile Menu Toggle
      const btn = document.getElementById("mobile-menu-btn");
      const menu = document.getElementById("mobile-menu");

      btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
      });

      // Theme Toggle
      const themeToggle = document.getElementById("theme-toggle");
      const themeToggleMobile = document.getElementById("theme-toggle-mobile");
      const themeIcon = document.getElementById("theme-icon");
      const themeIconMobile = document.getElementById("theme-icon-mobile");
      const rootEl = document.documentElement;

      function applyTheme(mode) {
        const isDark = mode === "dark";
        rootEl.classList.toggle("theme-dark", isDark);
        try {
          localStorage.setItem("theme", mode);
        } catch (_) {
          // ignore storage errors
        }
        const iconClass = isDark ? "fa-solid fa-sun" : "fa-solid fa-moon";
        if (themeIcon) themeIcon.className = iconClass;
        if (themeIconMobile) themeIconMobile.className = iconClass;
        if (themeToggle) {
          themeToggle.setAttribute(
            "aria-label",
            isDark ? "Switch to light theme" : "Switch to dark theme",
          );
        }
        if (themeToggleMobile) {
          themeToggleMobile.setAttribute(
            "aria-label",
            isDark ? "Switch to light theme" : "Switch to dark theme",
          );
        }
      }

      function initTheme() {
        applyTheme("light");
      }

      function toggleTheme() {
        const isDark = rootEl.classList.contains("theme-dark");
        applyTheme(isDark ? "light" : "dark");
      }

      initTheme();
      if (themeToggle) themeToggle.addEventListener("click", toggleTheme);
      if (themeToggleMobile) themeToggleMobile.addEventListener("click", toggleTheme);

      // ... existing filterProjects script ...
      // Project Filtering
      function filterProjects(category) {
        const buttons = document.querySelectorAll(".project-filter");
        const projects = document.querySelectorAll("#projects-grid > div");

        // Update buttons
        buttons.forEach((b) => {
          if (
            b.innerText.toLowerCase() === category ||
            (category === "all" && b.innerText === "All")
          ) {
            b.classList.remove(
              "bg-white",
              "text-slate-600",
              "border",
              "border-slate-200",
            );
            b.classList.add("bg-slate-900", "text-white");
          } else {
            b.classList.add(
              "bg-white",
              "text-slate-600",
              "border",
              "border-slate-200",
            );
            b.classList.remove("bg-slate-900", "text-white");
          }
        });

        // Filter items
        projects.forEach((project) => {
          const projectCat = project.getAttribute("data-category");
          if (category === "all" || projectCat === category) {
            project.classList.remove("hidden");
          } else {
            project.classList.add("hidden");
          }
        });
      }

      // ... existing terminal logic ...
      // Terminal Simulation Logic
      const terminalOutput = document.getElementById("terminal-output");
      const terminalStatus = document.getElementById("terminal-status");

      const commands = [
        { text: "$ npm run test:e2e", delay: 500, type: "cmd" },
        { text: "> playwright test", delay: 1000, type: "info" },
        { text: "Running 12 tests using 3 workers", delay: 1200, type: "info" },
        {
          text: "[chromium]  login.spec.ts:14  user can login with valid credentials",
          delay: 2000,
          type: "pass",
        },
        {
          text: "[chromium]  checkout.spec.ts:22  cart updates total correctly",
          delay: 3000,
          type: "pass",
        },
        {
          text: "[webkit]    responsivness.spec.ts:5  mobile menu toggles",
          delay: 3800,
          type: "pass",
        },
        {
          text: "[firefox]   api_mock.spec.ts:45  intercepts 404 cleanly",
          delay: 4500,
          type: "pass",
        },
        {
          text: "[chromium]  performance.spec.ts:8  LCP is under 2.5s",
          delay: 5200,
          type: "warn",
        },
        {
          text: "   Warning: LCP is 2.4s (Threshold: 2.5s)",
          delay: 5250,
          type: "warn-detail",
        },
        {
          text: "[chromium]  payment.spec.ts:99  processes stripe payment",
          delay: 6500,
          type: "pass",
        },
        { text: "", delay: 7000, type: "spacer" },
        { text: "  12 passed (5.4s)", delay: 7000, type: "success-summary" },
        { text: "  All systems operational.", delay: 7500, type: "info" },
      ];

      let startTime = Date.now();

      function addLine(cmd) {
        const line = document.createElement("div");
        line.classList.add("mb-1", "font-mono");

        if (cmd.type === "cmd") {
          line.innerHTML = `<span class="text-blue-400 font-bold mr-2"></span><span class="text-slate-100">${cmd.text}</span>`;
        } else if (cmd.type === "pass") {
          line.innerHTML = `<span class="text-green-500 mr-2"></span><span class="text-slate-300">${cmd.text}</span>`;
        } else if (cmd.type === "warn") {
          line.innerHTML = `<span class="text-yellow-500 mr-2"></span><span class="text-slate-300">${cmd.text}</span>`;
        } else if (cmd.type === "warn-detail") {
          line.innerHTML = `<span class="text-yellow-500 ml-6 text-xs">${cmd.text}</span>`;
        } else if (cmd.type === "success-summary") {
          line.innerHTML = `<span class="text-green-400 font-bold">${cmd.text}</span>`;
        } else {
          line.innerHTML = `<span class="text-slate-400">${cmd.text}</span>`;
        }

        terminalOutput.appendChild(line);
        terminalOutput.scrollTop = terminalOutput.scrollHeight;
      }

      function runTerminal() {
        terminalOutput.innerHTML = ""; // Clear previous run

        commands.forEach((cmd, index) => {
          setTimeout(() => {
            addLine(cmd);

            // Update timer in status bar
            if (index < commands.length - 1) {
              const timeElapsed = ((Date.now() - startTime) / 1000).toFixed(1);
              terminalStatus.querySelector("span:last-child").innerText =
                `Time: ${timeElapsed}s`;
            } else {
              terminalStatus.querySelector("span:first-child").innerHTML =
                `<i class="fa-solid fa-check mr-1"></i> DONE`;
              terminalStatus
                .querySelector("span:first-child")
                .classList.replace("text-blue-400", "text-green-400");
            }
          }, cmd.delay);
        });

        // Loop the animation
        setTimeout(() => {
          terminalStatus.querySelector("span:first-child").innerHTML =
            `<i class="fa-solid fa-spinner fa-spin mr-1"></i> RUNNING`;
          terminalStatus
            .querySelector("span:first-child")
            .classList.replace("text-green-400", "text-blue-400");
          startTime = Date.now();
          runTerminal();
        }, 12000);
      }

        // Start the simulation
        window.addEventListener('load', () => {
          runTerminal();
          loadDeployStatus();
        });

        async function loadDeployStatus() {
          const statusEl = document.getElementById('deploy-text');
          const dotEl = document.getElementById('deploy-dot');
          const linkEl = document.getElementById('deploy-link');

          if (!statusEl || !dotEl || !linkEl) return;

          const cacheKey = 'deployStatusCache_v1';
          const cacheTtlMs = 10 * 60 * 1000;

          const applyStatus = (payload) => {
            const status = payload.status || 'unknown';
            const updated = payload.updated
              ? new Date(payload.updated).toLocaleString()
              : 'unknown time';
            statusEl.innerText = `${status.replace(/_/g, ' ')}  ${updated}`;
            if (payload.url) linkEl.href = payload.url;

            dotEl.classList.remove(
              'bg-slate-300',
              'bg-green-500',
              'bg-red-500',
              'bg-yellow-500',
              'bg-blue-500'
            );

            if (status === 'success') dotEl.classList.add('bg-green-500');
            else if (status === 'failure') dotEl.classList.add('bg-red-500');
            else if (status === 'cancelled') dotEl.classList.add('bg-yellow-500');
            else if (status === 'in_progress' || status === 'queued')
              dotEl.classList.add('bg-blue-500');
            else dotEl.classList.add('bg-slate-300');
          };

          try {
            const cached = JSON.parse(localStorage.getItem(cacheKey) || 'null');
            if (cached && Date.now() - cached.timestamp < cacheTtlMs) {
              applyStatus(cached.payload);
              return;
            }
          } catch (_) {
            // Ignore cache parsing errors
          }

          try {
            const res = await fetch(
              'https://api.github.com/repos/murdadrum/QAPI/actions/workflows/deploy.yml/runs?per_page=1'
            );
            if (!res.ok) throw new Error('Request failed');
            const data = await res.json();
            const run = data.workflow_runs && data.workflow_runs[0];
            if (!run) throw new Error('No runs found');

            const payload = {
              status: run.conclusion || run.status || 'unknown',
              updated: run.updated_at || null,
              url: run.html_url || null,
            };

            applyStatus(payload);
            try {
              localStorage.setItem(
                cacheKey,
                JSON.stringify({ timestamp: Date.now(), payload })
              );
            } catch (_) {
              // Ignore storage errors
            }
          } catch (err) {
            // Fallback to stale cache if available
            try {
              const cached = JSON.parse(localStorage.getItem(cacheKey) || 'null');
              if (cached && cached.payload) {
                applyStatus(cached.payload);
                return;
              }
            } catch (_) {
              // Ignore cache parsing errors
            }

            statusEl.innerText = 'Unable to load status';
            dotEl.classList.remove(
              'bg-green-500',
              'bg-red-500',
              'bg-yellow-500',
              'bg-blue-500'
            );
            dotEl.classList.add('bg-slate-300');
          }
        }

      /* -------------------------------------------------------------------------- */
      /* Demo Modal Logic                             */
      /* -------------------------------------------------------------------------- */
      const demoModal = document.getElementById("demo-modal");
      const demoContent = document.getElementById("demo-content");
      const demoLeftPane = document.getElementById("demo-left-pane");
      const demoLogs = document.getElementById("demo-logs");
      const demoStatus = document.getElementById("demo-status");
      const demoGrid = document.getElementById("demo-grid");
      const demoRightPane = document.getElementById("demo-right-pane");
      const demoRightTitle = document.getElementById("demo-right-title");
      const demoRightHeader = document.getElementById("demo-right-header");
      let apiMonitorInterval;

      const demos = {
        automation: {
          title: "Crossbrowser E2E",
          type: "qa",
          url: "https://github.com/murdadrum/QAPI/actions/workflows/qa-e2e.yml",
          target: "https://joshbarteaux.com/",
          suite: "Playwright + Pytest E2E",
        },
        "automation-chat-assistant": {
          title: "Chat Assistant",
          type: "qa",
          url: "https://github.com/murdadrum/QAPI/actions/workflows/qa-chat-assistant.yml",
          target: "https://joshbarteaux.com/",
          suite: "Chat Assistant Validation",
        },
        "automation-form-submit": {
          title: "Form Submit",
          type: "qa",
          url: "https://github.com/murdadrum/QAPI/actions/workflows/qa-form-submit.yml",
          target: "https://joshbarteaux.com/",
          suite: "Contact Form Workflow",
        },
        "automation-modals": {
          title: "Modals",
          type: "qa",
          url: "https://github.com/murdadrum/QAPI/actions/workflows/qa-modals.yml",
          target: "https://joshbarteaux.com/",
          suite: "Modal Behavior + Focus",
        },
        "automation-links-downloads": {
          title: "Links + Downloads",
          type: "qa",
          url: "https://github.com/murdadrum/QAPI/actions/workflows/qa-links-downloads.yml",
          target: "https://joshbarteaux.com/",
          suite: "Outbound Integrity",
        },
        "automation-emulation": {
          title: "Emulation Suite",
          type: "embed",
          subtitle: "Device + environment simulation",
          points: [
            "Mobile: iPhone 15 + Pixel 8 profiles",
            "Geolocation: multi-region coverage",
            "Design: light/dark theme validation",
            "Offline: cache, retry, and UX fallbacks",
          ],
        },
        api: {
          title: "API Monitor & Runner",
          type: "dashboard",
        },
        devops: {
          title: "GitHub Actions Deploy Status",
          type: "devops",
          url: "https://github.com/murdadrum/QAPI/actions/workflows/deploy.yml",
        },
        "docs-test-scripts": {
          title: "Manual Test Scripts",
          type: "docs",
          docId: "docs-test-scripts",
        },
        "docs-requirements": {
          title: "Requirements",
          type: "docs",
          docId: "docs-requirements",
        },
        "docs-user-stories": {
          title: "User Stories",
          type: "docs",
          docId: "docs-user-stories",
        },
        "docs-rtm": {
          title: "RTM",
          type: "docs",
          docId: "docs-rtm",
        },
        "docs-uat": {
          title: "UAT",
          type: "docs",
          docId: "docs-uat",
        },
        "docs-bug-tracking": {
          title: "Bug Tracking",
          type: "docs",
          docId: "docs-bug-tracking",
        },
        "docs-retrospectives": {
          title: "Retrospectives",
          type: "docs",
          docId: "docs-retrospectives",
        },
      };

      function openDemo(type) {
        if (!demos[type]) return;
        const data = demos[type];
        document.getElementById("demo-title").innerText = data.title;
        demoLogs.innerHTML = "";
        clearInterval(apiMonitorInterval);
        if (demoRightHeader) demoRightHeader.classList.remove("hidden");
        if (demoGrid) {
          demoGrid.classList.remove("docs-wide");
          demoGrid.classList.remove("docs-manual");
        }

        // Show Modal
        demoModal.classList.remove("hidden");
        setTimeout(() => {
          demoModal.classList.remove("opacity-0");
          demoContent.classList.remove("scale-95");
        }, 10);

        // Handle content based on type
        if (data.type === "script") {
          setDemoLayout("split");
          setupScriptDemo(data);
        } else if (data.type === "dashboard") {
          setDemoLayout("split");
          setupApiDashboard();
        } else if (data.type === "qa") {
          setDemoLayout("split");
          setupAutomationDashboard(data);
        } else if (data.type === "embed") {
          setDemoLayout("split");
          setupEmbedDemo(data);
        } else if (data.type === "devops") {
          setDemoLayout("split");
          setupDevopsDashboard(data);
        } else if (data.type === "docs") {
          setDemoLayout("split");
          setupDocsScripts(data.docId);
        }
      }

      function setDemoLayout(mode) {
        if (!demoGrid || !demoRightPane) return;

        if (mode === "iframe") {
          demoRightPane.classList.add("hidden");
          demoGrid.style.gridTemplateColumns = "1fr";
          demoGrid.style.height = "70vh";
        } else {
          demoRightPane.classList.remove("hidden");
          demoGrid.style.gridTemplateColumns = "";
          demoGrid.style.height = "";
        }
      }

      function setupScriptDemo(data) {
        if (demoRightTitle) demoRightTitle.innerText = "Console Output";
        // Restore default view for scripts
        demoLeftPane.innerHTML = `
                <div class="text-slate-500 mb-4">// tests/checkout.spec.ts</div>
                <div id="demo-code" class="text-blue-300 whitespace-pre">${data.code}</div>
            `;
        demoStatus.innerHTML =
          '<i class="fa-solid fa-circle-notch fa-spin"></i> Initializing...';
        demoStatus.className = "text-blue-400 font-bold";

        let stepIndex = 0;
        const runSteps = () => {
          if (stepIndex >= data.steps.length) {
            demoStatus.innerHTML =
              '<i class="fa-solid fa-check"></i> Completed';
            demoStatus.className = "text-green-500 font-bold";
            return;
          }
          const step = data.steps[stepIndex];
          setTimeout(
            () => {
              logToConsole(step);
              if (step.type === "step") {
                demoStatus.innerHTML =
                  '<i class="fa-solid fa-microchip fa-spin"></i> Executing...';
              }
              stepIndex++;
              runSteps();
            },
            step.delay - (stepIndex > 0 ? data.steps[stepIndex - 1].delay : 0),
          );
        };
        runSteps();
      }

      function setupApiDashboard() {
        if (demoRightTitle) demoRightTitle.innerText = "Console Output";
        // Build Dashboard HTML
        demoLeftPane.innerHTML = `
                <div class="mb-6">
                    <h3 class="text-slate-200 font-bold mb-2 text-xs uppercase tracking-wider">System Status</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Uptime</div>
                            <div class="text-green-400 font-bold">99.99%</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Avg Latency</div>
                            <div class="text-blue-400 font-bold"><span id="avg-latency">42</span>ms</div>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-slate-200 font-bold mb-3 text-xs uppercase tracking-wider">Live Endpoints</h3>
                    <div class="space-y-3" id="endpoint-list">
                        <!-- Endpoints generated below -->
                    </div>
                </div>
            `;

        const endpoints = [
          { method: "GET", url: "/v1/status", label: "Health Check" },
          { method: "POST", url: "/v1/auth", label: "Login" },
          { method: "GET", url: "/v1/users", label: "User List" },
          { method: "POST", url: "/v1/orders", label: "Create Order" },
        ];

        const list = document.getElementById("endpoint-list");

        endpoints.forEach((ep, i) => {
          const id = `ep-${i}`;
          list.innerHTML += `
                    <div class="flex items-center justify-between p-3 bg-slate-800/50 hover:bg-slate-800 transition rounded border border-slate-700/50">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-[10px] font-bold px-1.5 py-0.5 rounded ${ep.method === "GET" ? "bg-blue-500/20 text-blue-400" : "bg-green-500/20 text-green-400"}">${ep.method}</span>
                                <span class="text-slate-300 text-xs font-mono">${ep.url}</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                                <span class="text-slate-500 text-[10px]" id="latency-${i}">${Math.floor(Math.random() * 50 + 20)}ms</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                             <button onclick="runApiTest('${ep.method}', '${ep.url}', 'load')" class="px-2 py-1 text-[10px] bg-slate-700 hover:bg-slate-600 text-slate-300 rounded transition border border-slate-600">Load</button>
                             <button onclick="runApiTest('${ep.method}', '${ep.url}', 'test')" class="px-3 py-1 text-[10px] bg-blue-600 hover:bg-blue-500 text-white rounded transition font-bold shadow-lg shadow-blue-500/20">Test</button>
                        </div>
                    </div>
                `;
        });

        // Start Live Monitor Effect
        apiMonitorInterval = setInterval(() => {
          // Update average
          document.getElementById("avg-latency").innerText = Math.floor(
            Math.random() * 20 + 35,
          );
          // Update individual latencies
          endpoints.forEach((_, i) => {
            const el = document.getElementById(`latency-${i}`);
            if (el) el.innerText = Math.floor(Math.random() * 80 + 20) + "ms";
          });
        }, 1500);

        demoStatus.innerHTML =
          '<i class="fa-solid fa-wifi text-green-500"></i> Connected';
        demoStatus.className = "text-green-500 font-bold";

        // Add initial log
        logToConsole({
          msg: "Dashboard initialized. Waiting for actions...",
          type: "info",
        });
      }

      function setupAutomationDashboard(data) {
        if (demoRightTitle) demoRightTitle.innerText = "Test Matrix";
        const targetLabel = data.target.replace(/^https?:\/\//, "");
        demoLeftPane.innerHTML = `
                <div class="space-y-4">
                    <div class="flex items-center gap-3">
                        <span class="text-xs uppercase tracking-wider text-slate-400">Suite</span>
                        <span class="text-slate-200 font-bold">${data.suite || data.title}</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Status</div>
                            <div id="qa-status" class="text-blue-400 font-bold">Loading...</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Pass Rate</div>
                            <div id="qa-passrate" class="text-slate-200 font-bold">--</div>
                            <div id="qa-passcount" class="text-slate-500 text-[10px]">--</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Duration</div>
                            <div id="qa-duration" class="text-slate-200 font-bold">--</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Target</div>
                            <a id="qa-target-link" class="block w-full truncate text-slate-200 font-bold underline hover:text-white" href="${data.target}" target="_blank" rel="noopener" title="${data.target}">${targetLabel}</a>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border border-slate-700 col-span-2">
                            <div class="text-slate-500 text-xs">Trace Viewer</div>
                            <div class="flex flex-wrap items-center gap-3">
                              <a id="qa-trace-link" class="text-slate-200 font-bold underline hover:text-white" href="${data.url}" target="_blank">Download Trace</a>
                              <a id="qa-trace-view" class="text-slate-300 text-xs underline hover:text-white" href="https://trace.playwright.dev" target="_blank">View Trace Viewer</a>
                            </div>
                            <div id="qa-trace-note" class="text-slate-500 text-[10px]">Latest run traces</div>
                        </div>
                    </div>
                    <div class="bg-slate-800 p-3 rounded border border-slate-700">
                        <div class="text-slate-500 text-xs mb-1">Commit</div>
                        <div id="qa-commit" class="text-slate-200 text-sm">--</div>
                        <a id="qa-commit-link" class="text-xs text-slate-400 underline hover:text-white" href="${data.url}" target="_blank">View on GitHub</a>
                    </div>
                    <div class="flex items-center justify-between text-xs text-slate-400">
                        <span id="qa-updated">Last updated: --</span>
                        <a id="qa-run-link" class="underline hover:text-white" href="${data.url}" target="_blank">Open Workflow</a>
                    </div>
                </div>
            `;

        demoLogs.innerHTML = `
                <div class="text-slate-500 text-xs uppercase tracking-wider mb-2">Jobs</div>
                <div id="qa-jobs" class="space-y-2"></div>
            `;

        demoStatus.innerHTML =
          '<i class="fa-solid fa-circle-notch fa-spin"></i> Loading';
        demoStatus.className = "text-blue-400 font-bold";

        loadAutomationStatus(data);
      }

      function setupEmbedDemo(data) {
        if (demoRightTitle) demoRightTitle.innerText = "Embed Notes";
        demoLeftPane.innerHTML = `
                <div class="h-full w-full">
                    <iframe
                      id="tech-embed-frame"
                      class="w-full h-full rounded-lg border border-slate-800 bg-black"
                      title="${data.title}"
                      loading="lazy"
                    ></iframe>
                </div>
                <div class="mt-3 text-xs text-slate-400">
                  Placeholder live embed for ${data.title}. Replace with a real URL when ready.
                </div>
            `;

        const frame = document.getElementById("tech-embed-frame");
        if (frame) {
          frame.srcdoc = `
            <style>
              body{margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0b1220;color:#e2e8f0;display:flex;align-items:center;justify-content:center;height:100vh}
              .card{border:1px solid #1f2937;background:linear-gradient(135deg,#0f172a,#111827);padding:24px;border-radius:16px;max-width:520px}
              .title{font-weight:700;font-size:20px;margin-bottom:8px}
              .sub{color:#94a3b8;font-size:12px;text-transform:uppercase;letter-spacing:.12em;margin-bottom:12px}
              .pill{display:inline-flex;align-items:center;gap:6px;background:#0b3b72;color:#93c5fd;border-radius:999px;padding:6px 10px;font-size:12px;font-weight:600}
              ul{margin:12px 0 0 16px;color:#cbd5f5;font-size:14px}
            </style>
            <div class="card">
              <div class="sub">${data.subtitle || "Automation Embed"}</div>
              <div class="title">${data.title}</div>
              <div class="pill">Live Embed Placeholder</div>
              <ul>
                ${(data.points || []).map((p) => `<li>${p}</li>`).join("")}
              </ul>
            </div>
          `;
        }

        demoLogs.innerHTML = `
                <div class="text-slate-500 text-xs uppercase tracking-wider mb-2">Notes</div>
                ${(data.points || [])
                  .map(
                    (p) =>
                      `<div class="text-slate-300 text-sm border border-slate-800 bg-slate-900/50 rounded px-3 py-2">${p}</div>`,
                  )
                  .join("")}
            `;

        demoStatus.innerHTML =
          '<i class="fa-solid fa-circle-notch fa-spin"></i> Placeholder';
        demoStatus.className = "text-blue-400 font-bold";
      }

      const manualScripts = [
        {
          id: "crossbrowser-e2e",
          title: "Crossbrowser E2E",
          sourceTests: [
            "test_homepage_title",
            "test_hero_headline",
            "test_crossbrowser_e2e_modal_opens",
          ],
          preconditions: [
            "Site is reachable at BASE_URL",
            "JavaScript enabled in browser",
            "Default viewport: 1280x720 unless specified",
          ],
          positive: [
            {
              action: "Navigate to BASE_URL",
              expected: "Homepage loads and title contains 'Josh'",
            },
            {
              action: "Verify hero headline text",
              expected: "Both 'Break the Code.' and 'Not the User.' are visible",
            },
            {
              action: "Click 'Crossbrowser E2E' chip",
              expected: "QA dashboard modal opens with suite title",
            },
            {
              action: "Open Featured Projects modal via Demo button",
              expected: "Iframe loads and modal title matches project card",
            },
          ],
          negative: [
            {
              action: "Open a Demo button with missing URL",
              expected: "Modal shows 'Demo coming soon' placeholder",
            },
            {
              action: "Toggle filters rapidly",
              expected: "No console errors; grid updates cleanly",
            },
          ],
          edge: [
            {
              action: "Test at 320px width",
              expected: "Navigation remains usable; no horizontal scroll",
            },
            {
              action: "Refresh while modal is open",
              expected: "Page loads without broken state",
            },
          ],
        },
        {
          id: "chat-assistant",
          title: "Chat Assistant",
          sourceTests: ["test_chat_assistant_suite"],
          preconditions: ["Site is reachable at BASE_URL"],
          positive: [
            {
              action: "Open the chat assistant widget",
              expected: "Chat panel becomes visible",
            },
            {
              action: "Send a message: 'hello'",
              expected: "Assistant responds with a greeting",
            },
            {
              action: "Ask about skills",
              expected: "Response includes skills/tools list",
            },
          ],
          negative: [
            {
              action: "Send empty message",
              expected: "Message is not sent; no error displayed",
            },
            {
              action: "Send a long random string",
              expected: "Assistant returns fallback response",
            },
          ],
          edge: [
            {
              action: "Open/close widget repeatedly",
              expected: "No UI glitches or duplicated messages",
            },
          ],
        },
        {
          id: "form-submit",
          title: "Form Submit",
          sourceTests: ["test_form_submit_suite"],
          preconditions: ["Site is reachable at BASE_URL"],
          positive: [
            {
              action: "Fill Name, Email, and Message fields",
              expected: "Fields accept input",
            },
            {
              action: "Click 'Send Message'",
              expected: "Success alert appears",
            },
          ],
          negative: [
            {
              action: "Leave Email blank and submit",
              expected: "Browser validation blocks submit",
            },
            {
              action: "Enter invalid email format",
              expected: "Browser validation blocks submit",
            },
          ],
          edge: [
            {
              action: "Paste long message (500+ chars)",
              expected: "Textarea accepts input without layout break",
            },
          ],
        },
        {
          id: "modals",
          title: "Modals",
          sourceTests: ["test_modals_suite"],
          preconditions: ["Site is reachable at BASE_URL"],
          positive: [
            {
              action: "Click a project 'Demo' button",
              expected: "Project demo modal opens",
            },
            {
              action: "Validate modal title",
              expected: "Title matches the clicked project card",
            },
            {
              action: "Click the close (X) button",
              expected: "Modal closes",
            },
          ],
          negative: [
            {
              action: "Click outside modal (backdrop)",
              expected: "Modal closes without error",
            },
          ],
          edge: [
            {
              action: "Press ESC key",
              expected: "Modal closes (if open)",
            },
          ],
        },
        {
          id: "links-downloads",
          title: "Links + Downloads",
          sourceTests: ["test_links_downloads_suite"],
          preconditions: ["Site is reachable at BASE_URL"],
          positive: [
            {
              action: "Scan external links on the page",
              expected: "At least one http(s) link exists",
            },
            {
              action: "Validate link hrefs",
              expected: "Each href starts with http",
            },
          ],
          negative: [
            {
              action: "Check for empty hrefs",
              expected: "No external link has empty href",
            },
          ],
          edge: [
            {
              action: "Open external links in new tab",
              expected: "Target opens without blocking UI",
            },
          ],
        },
      ];

      function buildManualMarkdown(script) {
        const lines = [];
        lines.push(`# ${script.title}`);
        lines.push("");
        lines.push(`**Source Tests:** ${script.sourceTests.join(", ")}`);
        lines.push("");
        lines.push("## Preconditions");
        script.preconditions.forEach((p) => lines.push(`- ${p}`));
        lines.push("");
        if (script.positive?.length) {
          lines.push("## Positive Tests");
          script.positive.forEach((step, idx) => {
            lines.push(`${idx + 1}. **Action:** ${step.action}`);
            lines.push(`   **Expected:** ${step.expected}`);
          });
          lines.push("");
        }
        if (script.negative?.length) {
          lines.push("## Negative Tests");
          script.negative.forEach((step, idx) => {
            lines.push(`${idx + 1}. **Action:** ${step.action}`);
            lines.push(`   **Expected:** ${step.expected}`);
          });
          lines.push("");
        }
        if (script.edge?.length) {
          lines.push("## Edge Cases");
          script.edge.forEach((step, idx) => {
            lines.push(`${idx + 1}. **Action:** ${step.action}`);
            lines.push(`   **Expected:** ${step.expected}`);
          });
          lines.push("");
        }
        lines.push("");
        lines.push("## Metadata");
        lines.push(`- Generated from Playwright suite`);
        return lines.join("\n");
      }

      function buildManualJson(script) {
        return JSON.stringify(
          {
            title: script.title,
            sourceTests: script.sourceTests,
            preconditions: script.preconditions,
            positive: script.positive || [],
            negative: script.negative || [],
            edge: script.edge || [],
            generatedFrom: "Playwright",
          },
          null,
          2,
        );
      }

      function buildManualCsv(script) {
        const rows = [];
        const pushSection = (label, steps) => {
          (steps || []).forEach((step, idx) => {
            rows.push({
              Section: label,
              Step: idx + 1,
              Action: step.action,
              Expected: step.expected,
            });
          });
        };
        pushSection("Positive", script.positive);
        pushSection("Negative", script.negative);
        pushSection("Edge", script.edge);
        return buildCsv(["Section", "Step", "Action", "Expected"], rows);
      }

      const docsCatalog = {
        requirements: {
          title: "Requirements",
          columns: ["ID", "Type", "Priority", "Status", "Title", "Description"],
          rows: [
            {
              ID: "REQ-001",
              Type: "Functional",
              Priority: "High",
              Status: "Approved",
              Title: "Responsive Layout",
              Description: "Site renders correctly on mobile, tablet, desktop.",
            },
            {
              ID: "REQ-002",
              Type: "Functional",
              Priority: "High",
              Status: "Approved",
              Title: "Project Demo Modals",
              Description: "Demo buttons open modal with embedded iframe.",
            },
            {
              ID: "REQ-003",
              Type: "Functional",
              Priority: "Medium",
              Status: "Approved",
              Title: "Filter Projects",
              Description: "Category filters show/hide project cards.",
            },
            {
              ID: "REQ-004",
              Type: "Functional",
              Priority: "High",
              Status: "Approved",
              Title: "Contact Form",
              Description: "Form accepts name/email/message and confirms submit.",
            },
            {
              ID: "REQ-005",
              Type: "Non-Functional",
              Priority: "Medium",
              Status: "Approved",
              Title: "Theme Toggle",
              Description: "Light/Dark toggle persists user preference.",
            },
            {
              ID: "REQ-006",
              Type: "Functional",
              Priority: "Medium",
              Status: "Approved",
              Title: "Chat Assistant",
              Description: "Interactive assistant responds to user prompts.",
            },
          ],
        },
        userStories: {
          title: "User Stories",
          columns: [
            "ID",
            "Role",
            "Goal",
            "Benefit",
            "Acceptance Criteria",
            "Priority",
            "Status",
          ],
          rows: [
            {
              ID: "US-001",
              Role: "Visitor",
              Goal: "view projects",
              Benefit: "evaluate QA expertise quickly",
              "Acceptance Criteria": "Project cards filter and open demos.",
              Priority: "High",
              Status: "Done",
            },
            {
              ID: "US-002",
              Role: "Recruiter",
              Goal: "contact Josh",
              Benefit: "start a conversation",
              "Acceptance Criteria": "Contact form submits and confirms.",
              Priority: "High",
              Status: "Done",
            },
            {
              ID: "US-003",
              Role: "Hiring Manager",
              Goal: "see QA workflow",
              Benefit: "trust process maturity",
              "Acceptance Criteria": "QA dashboards show live status.",
              Priority: "High",
              Status: "In Progress",
            },
            {
              ID: "US-004",
              Role: "Engineer",
              Goal: "review tech stack",
              Benefit: "align on tooling",
              "Acceptance Criteria": "Tech chips show stack categories.",
              Priority: "Medium",
              Status: "Done",
            },
          ],
        },
        rtm: {
          title: "RTM",
          columns: ["REQ ID", "Story ID", "Test Suite", "Coverage", "Status"],
          rows: [
            {
              "REQ ID": "REQ-001",
              "Story ID": "US-001",
              "Test Suite": "Crossbrowser E2E",
              Coverage: "Automated",
              Status: "Passing",
            },
            {
              "REQ ID": "REQ-002",
              "Story ID": "US-001",
              "Test Suite": "Modals",
              Coverage: "Automated",
              Status: "Passing",
            },
            {
              "REQ ID": "REQ-004",
              "Story ID": "US-002",
              "Test Suite": "Form Submit",
              Coverage: "Automated",
              Status: "Passing",
            },
            {
              "REQ ID": "REQ-006",
              "Story ID": "US-003",
              "Test Suite": "Chat Assistant",
              Coverage: "Automated",
              Status: "Passing",
            },
          ],
        },
        uat: {
          title: "UAT",
          columns: ["UAT ID", "Scenario", "Steps", "Expected", "Status", "Notes"],
          rows: [
            {
              "UAT ID": "UAT-01",
              Scenario: "Browse Projects",
              Steps: "Open Projects section; filter by Automation",
              Expected: "Relevant cards shown",
              Status: "Pass",
              Notes: "",
            },
            {
              "UAT ID": "UAT-02",
              Scenario: "Open Demo Modal",
              Steps: "Click Demo on a project card",
              Expected: "Modal opens with live embed",
              Status: "Pass",
              Notes: "",
            },
            {
              "UAT ID": "UAT-03",
              Scenario: "Submit Contact Form",
              Steps: "Fill fields and submit",
              Expected: "Confirmation alert displayed",
              Status: "Pass",
              Notes: "",
            },
            {
              "UAT ID": "UAT-04",
              Scenario: "Toggle Theme",
              Steps: "Toggle light/dark",
              Expected: "Theme updates and persists",
              Status: "Pass",
              Notes: "",
            },
          ],
        },
        bugTracking: {
          title: "Bug Tracking",
          columns: [
            "Issue Type",
            "Summary",
            "Priority",
            "Severity",
            "Description",
            "Steps to Reproduce",
            "Expected Result",
            "Actual Result",
            "Environment",
            "Labels",
          ],
          rows: [
            {
              "Issue Type": "Bug",
              Summary: "Project demo modal closes on scroll",
              Priority: "High",
              Severity: "Major",
              Description: "Modal unexpectedly closes when scrolling.",
              "Steps to Reproduce": "Open project demo modal and scroll.",
              "Expected Result": "Modal stays open.",
              "Actual Result": "Modal closes.",
              Environment: "Chrome 121 / macOS",
              Labels: "modal,ui",
            },
            {
              "Issue Type": "Bug",
              Summary: "Chat assistant response delayed",
              Priority: "Medium",
              Severity: "Minor",
              Description: "Bot response delay > 3s.",
              "Steps to Reproduce": "Open chat and send 'hello'.",
              "Expected Result": "Response within 2s.",
              "Actual Result": "Response after 4s.",
              Environment: "Safari 17",
              Labels: "chat,performance",
            },
            {
              "Issue Type": "Bug",
              Summary: "Theme toggle icon not updating",
              Priority: "Low",
              Severity: "Minor",
              Description: "Icon stays moon after switching to dark.",
              "Steps to Reproduce": "Toggle theme twice.",
              "Expected Result": "Icon reflects current theme.",
              "Actual Result": "Icon not updated.",
              Environment: "Firefox 122",
              Labels: "theme,ui",
            },
            {
              "Issue Type": "Bug",
              Summary: "Filter buttons overlap on small screens",
              Priority: "Medium",
              Severity: "Major",
              Description: "Filter buttons wrap but overlap at 320px.",
              "Steps to Reproduce": "Resize viewport to 320px.",
              "Expected Result": "Buttons stack without overlap.",
              "Actual Result": "Buttons overlap.",
              Environment: "Chrome 121",
              Labels: "responsive,ui",
            },
            {
              "Issue Type": "Bug",
              Summary: "Contact form allows invalid email",
              Priority: "High",
              Severity: "Major",
              Description: "Email validation bypassed when pasting.",
              "Steps to Reproduce": "Paste 'abc' into email, submit.",
              "Expected Result": "Form blocks submit.",
              "Actual Result": "Form submits.",
              Environment: "Edge 121",
              Labels: "form,validation",
            },
            {
              "Issue Type": "Bug",
              Summary: "Demo iframe blank on first open",
              Priority: "Medium",
              Severity: "Major",
              Description: "Iframe source not set on first click.",
              "Steps to Reproduce": "Click Demo on first project.",
              "Expected Result": "Iframe loads content.",
              "Actual Result": "Blank iframe.",
              Environment: "Chrome 121",
              Labels: "iframe,modal",
            },
            {
              "Issue Type": "Bug",
              Summary: "Mobile nav remains open after selection",
              Priority: "Low",
              Severity: "Minor",
              Description: "Mobile menu does not close on link click.",
              "Steps to Reproduce": "Open menu, click a link.",
              "Expected Result": "Menu closes.",
              "Actual Result": "Menu stays open.",
              Environment: "iPhone Safari",
              Labels: "mobile,nav",
            },
            {
              "Issue Type": "Bug",
              Summary: "Hero CTA shadow flickers",
              Priority: "Low",
              Severity: "Trivial",
              Description: "Button shadow flickers on hover.",
              "Steps to Reproduce": "Hover CTA repeatedly.",
              "Expected Result": "Smooth shadow transition.",
              "Actual Result": "Shadow flickers.",
              Environment: "Chrome 121",
              Labels: "ui,hover",
            },
            {
              "Issue Type": "Bug",
              Summary: "Docs modal copy button intermittently fails",
              Priority: "Medium",
              Severity: "Minor",
              Description: "Clipboard write fails without fallback.",
              "Steps to Reproduce": "Open docs modal, click Copy.",
              "Expected Result": "Content copied.",
              "Actual Result": "No clipboard update.",
              Environment: "Firefox 122",
              Labels: "docs,clipboard",
            },
            {
              "Issue Type": "Bug",
              Summary: "Project filter resets on refresh",
              Priority: "Low",
              Severity: "Minor",
              Description: "Filter state not persisted.",
              "Steps to Reproduce": "Select filter, refresh page.",
              "Expected Result": "Filter persists (optional).",
              "Actual Result": "Resets to All.",
              Environment: "Any",
              Labels: "filter,ux",
            },
            {
              "Issue Type": "Bug",
              Summary: "Chat input allows only 1 char width on iOS",
              Priority: "Medium",
              Severity: "Major",
              Description: "Input renders too narrow on iOS.",
              "Steps to Reproduce": "Open chat on iOS.",
              "Expected Result": "Full width input.",
              "Actual Result": "1 char width.",
              Environment: "iOS 17 Safari",
              Labels: "chat,ios",
            },
            {
              "Issue Type": "Bug",
              Summary: "Dark theme contrast fails on badges",
              Priority: "Medium",
              Severity: "Minor",
              Description: "Badges low contrast in dark theme.",
              "Steps to Reproduce": "Toggle dark theme.",
              "Expected Result": "Readable badges.",
              "Actual Result": "Low contrast.",
              Environment: "Any",
              Labels: "theme,a11y",
            },
          ],
        },
        retrospectives: {
          title: "Retrospectives",
          columns: [
            "Deployment",
            "Date",
            "Status",
            "Summary",
            "Wins",
            "Issues",
            "Action Items",
            "Duration",
          ],
          rows: [
            {
              Deployment: "Deploy to GitHub Pages",
              Date: "",
              Status: "",
              Summary: "Awaiting deployment data",
              Wins: "",
              Issues: "",
              "Action Items": "",
              Duration: "",
            },
          ],
          dynamic: true,
          lastUpdated: 0,
        },
      };

      const docsRegistry = [
        { id: "docs-test-scripts", label: "Test Scripts", kind: "manual" },
        { id: "docs-requirements", label: "Requirements", kind: "table", key: "requirements" },
        { id: "docs-user-stories", label: "User Stories", kind: "table", key: "userStories" },
        { id: "docs-rtm", label: "RTM", kind: "table", key: "rtm" },
        { id: "docs-uat", label: "UAT", kind: "table", key: "uat" },
        { id: "docs-bug-tracking", label: "Bug Tracking", kind: "table", key: "bugTracking" },
        { id: "docs-retrospectives", label: "Retrospectives", kind: "table", key: "retrospectives" },
      ];

      function escapeCsv(value) {
        if (value === null || value === undefined) return "";
        const str = String(value);
        if (/[",\n]/.test(str)) {
          return `"${str.replace(/"/g, '""')}"`;
        }
        return str;
      }

      function buildCsv(columns, rows) {
        const header = columns.map(escapeCsv).join(",");
        const body = rows
          .map((row) => columns.map((c) => escapeCsv(row[c] ?? "")).join(","))
          .join("\n");
        return `${header}\n${body}`;
      }

      function buildTableMarkdown(doc) {
        const lines = [];
        lines.push(`# ${doc.title}`);
        lines.push("");
        lines.push(`| ${doc.columns.join(" | ")} |`);
        lines.push(`| ${doc.columns.map(() => "---").join(" | ")} |`);
        doc.rows.forEach((row) => {
          lines.push(
            `| ${doc.columns.map((c) => String(row[c] ?? "")).join(" | ")} |`,
          );
        });
        return lines.join("\n");
      }

      function buildTableJson(doc) {
        return JSON.stringify(
          {
            title: doc.title,
            columns: doc.columns,
            rows: doc.rows,
          },
          null,
          2,
        );
      }

      function setupDocsScripts(initialDocId) {
        if (demoRightHeader) demoRightHeader.classList.add("hidden");
        if (demoRightTitle) demoRightTitle.innerText = "Controls";

        demoLeftPane.innerHTML = `
                <div class="h-full w-full">
                    <pre id="docs-content" class="text-slate-200 text-sm leading-relaxed whitespace-pre-wrap"></pre>
                </div>
            `;

        demoLogs.innerHTML = `
                <div class="space-y-3">
                    <div id="docs-document-wrap">
                      <label id="docs-document-label" class="text-xs uppercase tracking-wider text-slate-400">Document</label>
                      <select id="docs-document" class="mt-1 w-full bg-slate-800 text-slate-200 border border-slate-700 rounded px-3 py-2 text-sm"></select>
                    </div>
                    <div id="docs-suite-wrap" class="hidden">
                      <label class="text-xs uppercase tracking-wider text-slate-400">Suite</label>
                      <select id="docs-suite" class="mt-1 w-full bg-slate-800 text-slate-200 border border-slate-700 rounded px-3 py-2 text-sm"></select>
                    </div>
                    <div class="flex flex-wrap items-center gap-3 justify-between">
                      <div class="flex items-center gap-2 text-xs uppercase tracking-wider text-slate-400">
                        <span>Controls</span>
                        <span class="flex items-center gap-1 text-green-500 font-semibold normal-case">
                          <i class="fa-solid fa-circle-check"></i> Ready
                        </span>
                      </div>
                      <div class="flex flex-wrap items-center gap-2">
                        <button id="docs-format-md" class="px-3 py-1 rounded bg-slate-800 text-slate-200 border border-slate-700 text-xs font-semibold">Markdown</button>
                        <button id="docs-format-csv" class="px-3 py-1 rounded bg-slate-800 text-slate-200 border border-slate-700 text-xs font-semibold">CSV</button>
                        <button id="docs-format-json" class="px-3 py-1 rounded bg-slate-800 text-slate-200 border border-slate-700 text-xs font-semibold">JSON</button>
                        <button id="docs-copy" class="px-3 py-1 rounded bg-blue-600 hover:bg-blue-500 text-white text-xs font-semibold">Copy</button>
                        <button id="docs-download" class="px-3 py-1 rounded bg-slate-700 hover:bg-slate-600 text-slate-100 text-xs font-semibold">Download</button>
                      </div>
                    </div>
                </div>
            `;

        const contentEl = document.getElementById("docs-content");
        const docEl = document.getElementById("docs-document");
        const docWrap = document.getElementById("docs-document-wrap");
        const docLabel = document.getElementById("docs-document-label");
        const suiteWrap = document.getElementById("docs-suite-wrap");
        const suiteEl = document.getElementById("docs-suite");
        const btnMd = document.getElementById("docs-format-md");
        const btnCsv = document.getElementById("docs-format-csv");
        const btnJson = document.getElementById("docs-format-json");
        const btnCopy = document.getElementById("docs-copy");
        const btnDownload = document.getElementById("docs-download");

        let currentFormat = "md";
        let currentDocId = initialDocId || "docs-test-scripts";
        let currentSuiteId = manualScripts[0]?.id || "";

        function getDoc() {
          return (
            docsRegistry.find((d) => d.id === currentDocId) ||
            docsRegistry[0]
          );
        }

        const retrospectivesTtlMs = 5 * 60 * 1000;
        let retrospectivesLoading = false;

        async function loadRetrospectives() {
          const doc = docsCatalog.retrospectives;
          if (Date.now() - doc.lastUpdated < retrospectivesTtlMs) return;
          try {
            const res = await fetch(
              "https://api.github.com/repos/murdadrum/QAPI/actions/workflows/deploy.yml/runs?per_page=5",
            );
            if (!res.ok) throw new Error("Failed to load deployments");
            const data = await res.json();
            doc.rows =
              (data.workflow_runs || []).map((run) => {
                const status = run.conclusion || run.status || "unknown";
                const started = run.run_started_at
                  ? new Date(run.run_started_at)
                  : null;
                const updated = run.updated_at ? new Date(run.updated_at) : null;
                const duration =
                  started && updated
                    ? formatDuration(updated - started)
                    : "--";
                return {
                  Deployment: run.name || "Deploy to GitHub Pages",
                  Date: run.created_at
                    ? new Date(run.created_at).toLocaleString()
                    : "--",
                  Status: status,
                  Summary: `Deployment ${status}`,
                  Wins: status === "success" ? "Clean deploy" : "",
                  Issues: status === "success" ? "None" : "Workflow error",
                  "Action Items":
                    status === "success"
                      ? "Monitor logs/metrics"
                      : "Fix failing step and re-run",
                  Duration: duration,
                };
              }) || doc.rows;
            doc.lastUpdated = Date.now();
          } catch (_) {
            doc.rows = doc.rows.length
              ? doc.rows
              : [
                  {
                    Deployment: "Deploy to GitHub Pages",
                    Date: "",
                    Status: "",
                    Summary: "Unable to load deployments",
                    Wins: "",
                    Issues: "",
                    "Action Items": "",
                    Duration: "",
                  },
                ];
            doc.lastUpdated = Date.now();
          }
        }

        function syncControls() {
          const doc = getDoc();
          if (demoGrid) {
            demoGrid.classList.toggle("docs-wide", doc.kind !== "manual");
            demoGrid.classList.toggle("docs-manual", doc.kind === "manual");
          }
          if (doc.kind === "manual") {
            if (docWrap) docWrap.classList.remove("hidden");
            if (suiteWrap) suiteWrap.classList.add("hidden");
            if (docLabel) docLabel.textContent = "Test Suite";
            if (docEl) {
              docEl.innerHTML = manualScripts
                .map((s) => `<option value="${s.id}">${s.title}</option>`)
                .join("");
              if (!manualScripts.find((s) => s.id === currentSuiteId)) {
                currentSuiteId = manualScripts[0]?.id || "";
              }
              docEl.value = currentSuiteId;
            }
          } else {
            if (docWrap) docWrap.classList.add("hidden");
            if (suiteWrap) suiteWrap.classList.add("hidden");
            if (docLabel) docLabel.textContent = "Document";
          }
        }

        function render() {
          const doc = getDoc();
          syncControls();
          if (doc.kind === "manual") {
            if (docEl && docEl.value) currentSuiteId = docEl.value;
            const script =
              manualScripts.find((s) => s.id === currentSuiteId) ||
              manualScripts[0];
            const text =
              currentFormat === "json"
                ? buildManualJson(script)
                : currentFormat === "csv"
                ? buildManualCsv(script)
                : buildManualMarkdown(script);
            if (contentEl) contentEl.textContent = text;
          } else {
            const tableDoc = docsCatalog[doc.key];
            if (tableDoc.dynamic) {
              if (
                !retrospectivesLoading &&
                Date.now() - tableDoc.lastUpdated >= retrospectivesTtlMs
              ) {
                retrospectivesLoading = true;
                loadRetrospectives()
                  .then(() => {
                    retrospectivesLoading = false;
                    render();
                  })
                  .catch(() => {
                    retrospectivesLoading = false;
                  });
              }
            }
            const text =
              currentFormat === "json"
                ? buildTableJson(tableDoc)
                : currentFormat === "csv"
                ? buildCsv(tableDoc.columns, tableDoc.rows)
                : buildTableMarkdown(tableDoc);
            if (contentEl) contentEl.textContent = text;
          }

          btnMd.classList.toggle("bg-blue-600", currentFormat === "md");
          btnMd.classList.toggle("text-white", currentFormat === "md");
          btnCsv.classList.toggle("bg-blue-600", currentFormat === "csv");
          btnCsv.classList.toggle("text-white", currentFormat === "csv");
          btnJson.classList.toggle("bg-blue-600", currentFormat === "json");
          btnJson.classList.toggle("text-white", currentFormat === "json");
        }

        function downloadFile() {
          const doc = getDoc();
          const text = contentEl ? contentEl.textContent || "" : "";
          const ext = currentFormat;
          const fileName = `${doc.id}.${ext}`;
          const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = fileName;
          document.body.appendChild(a);
          a.click();
          a.remove();
          URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
          const text = contentEl ? contentEl.textContent || "" : "";
          if (!text) return;
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(text);
          } else {
            const textarea = document.createElement("textarea");
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand("copy");
            textarea.remove();
          }
        }

        docEl.addEventListener("change", () => {
          if (getDoc().kind === "manual") {
            currentSuiteId = docEl.value;
            currentFormat = "md";
            render();
          }
        });
        btnMd.addEventListener("click", () => {
          currentFormat = "md";
          render();
        });
        btnCsv.addEventListener("click", () => {
          currentFormat = "csv";
          render();
        });
        btnJson.addEventListener("click", () => {
          currentFormat = "json";
          render();
        });
        btnCopy.addEventListener("click", copyToClipboard);
        btnDownload.addEventListener("click", downloadFile);

        render();

        demoStatus.innerHTML = '<i class="fa-solid fa-circle-check"></i> Ready';
        demoStatus.className = "text-green-500 font-bold";
      }

      async function loadAutomationStatus(data) {
        const cacheKey = "qaStatusCache_v1";
        const cacheTtlMs = 10 * 60 * 1000;

        const statusEl = document.getElementById("qa-status");
        const passRateEl = document.getElementById("qa-passrate");
        const passCountEl = document.getElementById("qa-passcount");
        const durationEl = document.getElementById("qa-duration");
        const commitEl = document.getElementById("qa-commit");
        const commitLinkEl = document.getElementById("qa-commit-link");
        const traceLinkEl = document.getElementById("qa-trace-link");
        const traceViewEl = document.getElementById("qa-trace-view");
        const traceNoteEl = document.getElementById("qa-trace-note");
        const updatedEl = document.getElementById("qa-updated");
        const runLinkEl = document.getElementById("qa-run-link");
        const jobsEl = document.getElementById("qa-jobs");

        const applyData = (payload) => {
          if (!payload) return;
          const viewerUrl =
            payload.traceViewerUrl ||
            (payload.traceUrl
              ? `https://trace.playwright.dev/?trace=${encodeURIComponent(
                  payload.traceUrl,
                )}`
              : "https://trace.playwright.dev");
          const status = payload.status || "unknown";
          const statusLabel = status.replace(/_/g, " ");
          if (statusEl) {
            statusEl.innerText = statusLabel;
            statusEl.className = `font-bold ${statusColor(status)}`;
          }
          if (passRateEl) passRateEl.innerText = payload.passRate || "--";
          if (passCountEl) passCountEl.innerText = payload.passCount || "--";
          if (durationEl) durationEl.innerText = payload.duration || "--";
          if (commitEl) commitEl.innerText = payload.commit || "--";
          if (commitLinkEl && payload.commitUrl) commitLinkEl.href = payload.commitUrl;
          if (traceLinkEl) {
            traceLinkEl.href = payload.traceUrl || payload.runUrl || data.url;
            traceLinkEl.innerText =
              payload.traceLabel || (payload.traceUrl ? "Download Trace" : "View Artifacts");
          }
          if (traceViewEl) {
            traceViewEl.href = viewerUrl;
          }
          if (traceNoteEl) traceNoteEl.innerText = payload.traceNote || "Latest run traces";
          if (updatedEl) updatedEl.innerText = `Last updated: ${payload.updated || "--"}`;
          if (runLinkEl && payload.runUrl) runLinkEl.href = payload.runUrl;

          if (jobsEl) {
            jobsEl.innerHTML = payload.jobs
              .map((job) => {
                return `
                    <a href="${job.url}" target="_blank" class="flex items-center justify-between p-2 rounded border border-slate-800 bg-slate-900/50 hover:bg-slate-800 transition">
                      <div>
                        <div class="text-slate-200 text-sm font-semibold">${job.name}</div>
                        <div class="text-slate-500 text-xs">${job.started || ""}</div>
                      </div>
                      <div class="text-right">
                        <div class="${statusColor(job.statusRaw)} text-xs font-bold">${job.statusLabel}</div>
                        <div class="text-slate-400 text-xs">${job.duration}</div>
                      </div>
                    </a>
                  `;
              })
              .join("");
          }

          demoStatus.innerHTML = `<i class="fa-solid fa-circle-notch fa-spin"></i> ${statusLabel}`;
          demoStatus.className = `${statusColor(status)} font-bold`;
        };

        try {
          const cached = JSON.parse(localStorage.getItem(cacheKey) || "null");
          if (cached && Date.now() - cached.timestamp < cacheTtlMs) {
            applyData(cached.payload);
            return;
          }
        } catch (_) {
          // ignore cache errors
        }

        try {
          const workflowFile = data.url ? data.url.split("/").pop() : "qa-e2e.yml";
          const publicTraceMap = {
            "qa-e2e.yml": "qa-e2e.zip",
            "qa-chat-assistant.yml": "qa-chat-assistant.zip",
            "qa-form-submit.yml": "qa-form-submit.zip",
            "qa-modals.yml": "qa-modals.zip",
            "qa-links-downloads.yml": "qa-links-downloads.zip",
          };
          const publicTraceFile = publicTraceMap[workflowFile];
          const publicTraceUrl = publicTraceFile
            ? `https://joshbarteaux.com/traces/${publicTraceFile}`
            : null;
          const runRes = await fetch(
            `https://api.github.com/repos/murdadrum/QAPI/actions/workflows/${workflowFile}/runs?per_page=1`,
          );
          if (!runRes.ok) throw new Error("Failed to load workflow runs");
          const runData = await runRes.json();
          const run = runData.workflow_runs && runData.workflow_runs[0];
          if (!run) throw new Error("No workflow runs found");

          const jobsRes = await fetch(
            `https://api.github.com/repos/murdadrum/QAPI/actions/runs/${run.id}/jobs?per_page=50`,
          );
          const jobsData = jobsRes.ok ? await jobsRes.json() : { jobs: [] };
          const jobs = (jobsData.jobs || []).map((job) => {
            const started = job.started_at
              ? new Date(job.started_at).toLocaleString()
              : "";
            const completed = job.completed_at
              ? new Date(job.completed_at).getTime()
              : null;
            const startedMs = job.started_at
              ? new Date(job.started_at).getTime()
              : null;
            const duration =
              startedMs && completed ? formatDuration(completed - startedMs) : "--";
            const statusRaw = job.conclusion || job.status || "unknown";
            const statusLabel = statusRaw.replace(/_/g, " ");
            return {
              name: job.name,
              statusRaw,
              statusLabel,
              duration,
              started,
              url: job.html_url || run.html_url || "#",
            };
          });

          const artifactsRes = await fetch(
            `https://api.github.com/repos/murdadrum/QAPI/actions/runs/${run.id}/artifacts?per_page=100`,
          );
          const artifactsData = artifactsRes.ok ? await artifactsRes.json() : { artifacts: [] };
          const artifacts = artifactsData.artifacts || [];
          const traceArtifact =
            artifacts.find(
              (artifact) =>
                artifact.name &&
                artifact.name.startsWith("playwright-traces-") &&
                !artifact.expired,
            ) || artifacts.find((artifact) => artifact.name && artifact.name.startsWith("playwright-traces-"));

          const totalJobs = jobs.length;
          const passedJobs = jobs.filter((job) => job.statusRaw === "success").length;
          const passRate = totalJobs
            ? `${Math.round((passedJobs / totalJobs) * 100)}%`
            : "--";
          const passCount = totalJobs ? `${passedJobs}/${totalJobs} passed` : "--";

          const startedAt = run.run_started_at
            ? new Date(run.run_started_at).getTime()
            : null;
          const updatedAt = run.updated_at
            ? new Date(run.updated_at).getTime()
            : null;
          const duration =
            startedAt && updatedAt ? formatDuration(updatedAt - startedAt) : "--";

          const payload = {
            status: run.conclusion || run.status || "unknown",
            duration,
            passRate,
            passCount,
            commit:
              run.head_commit && run.head_commit.message
                ? run.head_commit.message.split("\n")[0]
                : "",
            commitUrl:
              run.head_commit && run.head_commit.url
                ? run.head_commit.url
                : run.html_url,
            updated: run.updated_at
              ? new Date(run.updated_at).toLocaleString()
              : "--",
            runUrl: run.html_url || data.url,
            traceUrl: publicTraceUrl || (traceArtifact ? traceArtifact.archive_download_url : null),
            traceLabel: publicTraceUrl
              ? "Download latest trace"
              : traceArtifact
              ? `Download ${traceArtifact.name.replace("playwright-traces-", "")} trace`
              : null,
            traceNote: publicTraceUrl
              ? "Open the .zip in trace.playwright.dev"
              : traceArtifact
              ? "Open the .zip in trace.playwright.dev"
              : "No trace artifact found yet",
            jobs,
          };

          applyData(payload);
          try {
            localStorage.setItem(
              cacheKey,
              JSON.stringify({ timestamp: Date.now(), payload }),
            );
          } catch (_) {
            // ignore storage errors
          }
        } catch (err) {
          try {
            const cached = JSON.parse(localStorage.getItem(cacheKey) || "null");
            if (cached && cached.payload) {
              applyData(cached.payload);
              return;
            }
          } catch (_) {
            // ignore cache errors
          }

          demoStatus.innerText = "Unavailable";
          demoStatus.className = "text-slate-400 font-bold";
          if (jobsEl) {
            jobsEl.innerHTML =
              '<div class="text-slate-400 text-xs">Unable to load jobs.</div>';
          }
        }
      }

      function setupDevopsDashboard(data) {
        if (demoRightTitle) demoRightTitle.innerText = "Job Timeline";
        demoLeftPane.innerHTML = `
                <div class="space-y-4">
                    <div class="flex items-center gap-3">
                        <span class="text-xs uppercase tracking-wider text-slate-400">Workflow</span>
                        <span class="text-slate-200 font-bold">Deploy to GitHub Pages</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Status</div>
                            <div id="devops-status" class="text-blue-400 font-bold">Loading...</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Duration</div>
                            <div id="devops-duration" class="text-slate-200 font-bold">--</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Branch</div>
                            <div id="devops-branch" class="text-slate-200 font-bold">--</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border border-slate-700">
                            <div class="text-slate-500 text-xs">Actor</div>
                            <div id="devops-actor" class="text-slate-200 font-bold">--</div>
                        </div>
                    </div>
                    <div class="bg-slate-800 p-3 rounded border border-slate-700">
                        <div class="text-slate-500 text-xs mb-1">Commit</div>
                        <div id="devops-commit" class="text-slate-200 text-sm">--</div>
                        <a id="devops-commit-link" class="text-xs text-slate-400 underline hover:text-white" href="${data.url}" target="_blank">View on GitHub</a>
                    </div>
                    <div class="flex items-center justify-between text-xs text-slate-400">
                        <span id="devops-updated">Last updated: --</span>
                        <a id="devops-run-link" class="underline hover:text-white" href="${data.url}" target="_blank">Open Workflow</a>
                    </div>
                </div>
            `;

        demoLogs.innerHTML = `
                <div class="text-slate-500 text-xs uppercase tracking-wider mb-2">Jobs</div>
                <div id="devops-jobs" class="space-y-2"></div>
            `;

        demoStatus.innerHTML =
          '<i class="fa-solid fa-circle-notch fa-spin"></i> Loading';
        demoStatus.className = "text-blue-400 font-bold";

        loadDevopsStatus();
      }

      function formatDuration(ms) {
        if (!ms || ms < 0) return "--";
        const totalSeconds = Math.floor(ms / 1000);
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        if (minutes === 0) return `${seconds}s`;
        return `${minutes}m ${seconds}s`;
      }

      function statusColor(status) {
        if (status === "success") return "text-green-400";
        if (status === "failure") return "text-red-400";
        if (status === "cancelled") return "text-yellow-400";
        if (status === "in_progress" || status === "queued") return "text-blue-400";
        return "text-slate-400";
      }

      async function loadDevopsStatus() {
        const cacheKey = "devopsStatusCache_v1";
        const cacheTtlMs = 10 * 60 * 1000;

        const statusEl = document.getElementById("devops-status");
        const durationEl = document.getElementById("devops-duration");
        const branchEl = document.getElementById("devops-branch");
        const actorEl = document.getElementById("devops-actor");
        const commitEl = document.getElementById("devops-commit");
        const commitLinkEl = document.getElementById("devops-commit-link");
        const updatedEl = document.getElementById("devops-updated");
        const runLinkEl = document.getElementById("devops-run-link");
        const jobsEl = document.getElementById("devops-jobs");

        const applyData = (payload) => {
          if (!payload) return;
          const status = payload.status || "unknown";
          const statusLabel = status.replace(/_/g, " ");
          if (statusEl) {
            statusEl.innerText = statusLabel;
            statusEl.className = `font-bold ${statusColor(status)}`;
          }
          if (durationEl) durationEl.innerText = payload.duration || "--";
          if (branchEl) branchEl.innerText = payload.branch || "--";
          if (actorEl) actorEl.innerText = payload.actor || "--";
          if (commitEl) commitEl.innerText = payload.commit || "--";
          if (commitLinkEl && payload.commitUrl) commitLinkEl.href = payload.commitUrl;
          if (updatedEl) updatedEl.innerText = `Last updated: ${payload.updated || "--"}`;
          if (runLinkEl && payload.runUrl) runLinkEl.href = payload.runUrl;

          if (jobsEl) {
            jobsEl.innerHTML = payload.jobs
              .map((job) => {
                return `
                    <a href="${job.url}" target="_blank" class="flex items-center justify-between p-2 rounded border border-slate-800 bg-slate-900/50 hover:bg-slate-800 transition">
                      <div>
                        <div class="text-slate-200 text-sm font-semibold">${job.name}</div>
                        <div class="text-slate-500 text-xs">${job.started || ""}</div>
                      </div>
                      <div class="text-right">
                        <div class="${statusColor(job.statusRaw)} text-xs font-bold">${job.statusLabel}</div>
                        <div class="text-slate-400 text-xs">${job.duration}</div>
                      </div>
                    </a>
                  `;
              })
              .join("");
          }

          demoStatus.innerHTML = `<i class="fa-solid fa-circle-notch fa-spin"></i> ${statusLabel}`;
          demoStatus.className = `${statusColor(status)} font-bold`;
        };

        try {
          const cached = JSON.parse(localStorage.getItem(cacheKey) || "null");
          if (cached && Date.now() - cached.timestamp < cacheTtlMs) {
            applyData(cached.payload);
            return;
          }
        } catch (_) {
          // ignore cache errors
        }

        try {
          const runRes = await fetch(
            "https://api.github.com/repos/murdadrum/QAPI/actions/workflows/deploy.yml/runs?per_page=1",
          );
          if (!runRes.ok) throw new Error("Failed to load workflow runs");
          const runData = await runRes.json();
          const run = runData.workflow_runs && runData.workflow_runs[0];
          if (!run) throw new Error("No workflow runs found");

          const jobsRes = await fetch(
            `https://api.github.com/repos/murdadrum/QAPI/actions/runs/${run.id}/jobs?per_page=50`,
          );
          const jobsData = jobsRes.ok ? await jobsRes.json() : { jobs: [] };
          const jobs = (jobsData.jobs || []).map((job) => {
            const started = job.started_at
              ? new Date(job.started_at).toLocaleString()
              : "";
            const completed = job.completed_at
              ? new Date(job.completed_at).getTime()
              : null;
            const startedMs = job.started_at
              ? new Date(job.started_at).getTime()
              : null;
            const duration =
              startedMs && completed ? formatDuration(completed - startedMs) : "--";
            const statusRaw = job.conclusion || job.status || "unknown";
            const statusLabel = statusRaw.replace(/_/g, " ");
            return {
              name: job.name,
              statusRaw,
              statusLabel,
              duration,
              started,
              url: job.html_url || run.html_url || "#",
            };
          });

          const startedAt = run.run_started_at
            ? new Date(run.run_started_at).getTime()
            : null;
          const updatedAt = run.updated_at
            ? new Date(run.updated_at).getTime()
            : null;
          const duration =
            startedAt && updatedAt ? formatDuration(updatedAt - startedAt) : "--";

          const payload = {
            status: run.conclusion || run.status || "unknown",
            duration,
            branch: run.head_branch,
            actor: run.actor && run.actor.login ? run.actor.login : "",
            commit:
              run.head_commit && run.head_commit.message
                ? run.head_commit.message.split("\n")[0]
                : "",
            commitUrl:
              run.head_commit && run.head_commit.url
                ? run.head_commit.url
                : run.html_url,
            updated: run.updated_at
              ? new Date(run.updated_at).toLocaleString()
              : "--",
            runUrl: run.html_url || data.url,
            jobs,
          };

          applyData(payload);
          try {
            localStorage.setItem(
              cacheKey,
              JSON.stringify({ timestamp: Date.now(), payload }),
            );
          } catch (_) {
            // ignore storage errors
          }
        } catch (err) {
          try {
            const cached = JSON.parse(localStorage.getItem(cacheKey) || "null");
            if (cached && cached.payload) {
              applyData(cached.payload);
              return;
            }
          } catch (_) {
            // ignore cache errors
          }

          demoStatus.innerText = "Unavailable";
          demoStatus.className = "text-slate-400 font-bold";
          if (jobsEl) {
            jobsEl.innerHTML =
              '<div class="text-slate-400 text-xs">Unable to load jobs.</div>';
          }
        }
      }

      // Global function for onclick events
      window.runApiTest = function (method, url, mode) {
        logToConsole({
          msg: `${mode === "load" ? "Load Test" : "Request"}: ${method} ${url}`,
          type: "cmd",
        });

        demoStatus.innerHTML =
          '<i class="fa-solid fa-circle-notch fa-spin"></i> Sending...';
        demoStatus.className = "text-blue-400 font-bold";

        setTimeout(() => {
          if (mode === "test") {
            // Single Request Simulation
            logToConsole({
              msg: `> ${method} https://api.qalex.dev${url}`,
              type: "step",
            });
            setTimeout(() => {
              logToConsole({ msg: `< Status: 200 OK`, type: "pass" });
              logToConsole({
                msg: `< Time: ${Math.floor(Math.random() * 50 + 20)}ms`,
                type: "info",
              });
              logToConsole({
                msg: `< Body: { "success": true, "data": [...] }`,
                type: "info",
              });
              demoStatus.innerHTML =
                '<i class="fa-solid fa-wifi text-green-500"></i> Connected';
              demoStatus.className = "text-green-500 font-bold";
            }, 800);
          } else {
            // Load Test Simulation
            logToConsole({
              msg: `Spawning 50 VUs (Virtual Users)...`,
              type: "info",
            });
            let progress = 0;
            const loadInt = setInterval(() => {
              progress += 25;
              logToConsole({ msg: `... Progress: ${progress}%`, type: "step" });
              if (progress >= 100) {
                clearInterval(loadInt);
                logToConsole({
                  msg: ` Load Test Complete. 0 Failures.`,
                  type: "success",
                });
                logToConsole({
                  msg: `  p95 Latency: ${Math.floor(Math.random() * 20 + 100)}ms`,
                  type: "info",
                });
                demoStatus.innerHTML =
                  '<i class="fa-solid fa-wifi text-green-500"></i> Connected';
                demoStatus.className = "text-green-500 font-bold";
              }
            }, 600);
          }
        }, 500);
      };

      function logToConsole(step) {
        const line = document.createElement("div");
        line.className = "font-mono text-sm mb-1 animate-fade-in";

        if (step.type === "cmd")
          line.innerHTML = `<span class="text-slate-500">$</span> <span class="text-slate-200">${step.msg}</span>`;
        else if (step.type === "info")
          line.className = "text-slate-400 font-bold mt-2";
        else if (step.type === "step") line.className = "text-slate-500 ml-4";
        else if (step.type === "pass")
          line.innerHTML = `<span class="text-green-500 ml-4"> ${step.msg}</span>`;
        else if (step.type === "success")
          line.className =
            "text-green-400 font-bold mt-4 border-t border-slate-800 pt-2";
        else line.innerText = step.msg;

        demoLogs.appendChild(line);
        demoLogs.scrollTop = demoLogs.scrollHeight;
      }

      function closeDemo() {
        demoModal.classList.add("opacity-0");
        demoContent.classList.add("scale-95");
        clearInterval(apiMonitorInterval); // Stop dashboard updates
        setTimeout(() => {
          demoModal.classList.add("hidden");
        }, 300);
      }

      // Close on backdrop click
      demoModal.addEventListener("click", (e) => {
        if (e.target === demoModal) closeDemo();
      });

      /* -------------------------------------------------------------------------- */
      /* Project Demo Modal Logic                  */
      /* -------------------------------------------------------------------------- */
      const projectDemoModal = document.getElementById("project-demo-modal");
      const projectDemoContent = document.getElementById(
        "project-demo-content",
      );
      const projectDemoIframe = document.getElementById("project-demo-iframe");
      const projectDemoTitle = document.getElementById("project-demo-title");
      const projectDemoExternal = document.getElementById(
        "project-demo-external",
      );
      const projectDemoFrame = document.getElementById("project-demo-frame");

      function openProjectDemo(url, title) {
        projectDemoTitle.innerText = title || "Project Demo";
        projectDemoExternal.href = url && url !== "#" ? url : "#";

        if (!url || url === "#") {
          projectDemoIframe.removeAttribute("src");
          projectDemoIframe.setAttribute(
            "srcdoc",
            `<div style="font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; display:flex; align-items:center; justify-content:center; height:100%; color:#cbd5f5; background:#0b1220;">
                        Demo coming soon.
                    </div>`,
          );
        } else {
          projectDemoIframe.removeAttribute("srcdoc");
          projectDemoIframe.src = url;
        }

        const isFigmaSite = url && url.includes("figma.site");
        projectDemoFrame.classList.toggle("h-[70vh]", !isFigmaSite);
        projectDemoFrame.classList.toggle("h-[85vh]", isFigmaSite);

        projectDemoModal.classList.remove("hidden");
        setTimeout(() => {
          projectDemoModal.classList.remove("opacity-0");
          projectDemoContent.classList.remove("scale-95");
        }, 10);
      }

      function closeProjectDemo() {
        projectDemoModal.classList.add("opacity-0");
        projectDemoContent.classList.add("scale-95");
        setTimeout(() => {
          projectDemoModal.classList.add("hidden");
          projectDemoIframe.src = "";
          projectDemoIframe.removeAttribute("srcdoc");
        }, 300);
      }

      document.querySelectorAll(".project-demo").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          const url =
            btn.getAttribute("data-demo-url") || btn.getAttribute("href");
          const card = btn.closest(".group");
          const title = card
            ? card.querySelector("h3")?.innerText
            : "Project Demo";
          openProjectDemo(url, title);
        });
      });

      const projectCardImages = document.querySelectorAll(
        "#projects-grid > .group > div:first-child",
      );
      projectCardImages.forEach((imageArea) => {
        imageArea.classList.add("cursor-pointer");
        imageArea.setAttribute("role", "button");
        imageArea.setAttribute("tabindex", "0");
        imageArea.setAttribute("aria-label", "Open project demo");

        const openCardDemo = () => {
          const card = imageArea.closest(".group");
          const trigger = card ? card.querySelector(".project-demo") : null;
          if (!trigger) return;
          const url =
            trigger.getAttribute("data-demo-url") ||
            trigger.getAttribute("href");
          const title = card
            ? card.querySelector("h3")?.innerText
            : "Project Demo";
          openProjectDemo(url, title);
        };

        imageArea.addEventListener("click", openCardDemo);
        imageArea.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            openCardDemo();
          }
        });
      });

      projectDemoModal.addEventListener("click", (e) => {
        if (e.target === projectDemoModal) closeProjectDemo();
      });

      document.addEventListener("keydown", (e) => {
        if (
          e.key === "Escape" &&
          !projectDemoModal.classList.contains("hidden")
        ) {
          closeProjectDemo();
        }
      });

      const contactForm = document.getElementById("contact-form");
      const contactStatus = document.getElementById("contact-status");
      const contactSubmitBtn = document.getElementById("contact-submit-btn");
      const contactEndpoint =
        window.CONTACT_API_ENDPOINT ||
        "https://contact-api.remotelyamused.workers.dev/api/contact";

      if (contactForm) {
        contactForm.addEventListener("submit", async (e) => {
          e.preventDefault();
          if (!contactForm.reportValidity()) return;

          const name = contactForm.elements["contact_name"].value.trim();
          const email = contactForm.elements["contact_email"].value.trim();
          const message = contactForm.elements["contact_message"].value.trim();
          const company = contactForm.elements["company"].value.trim();

          if (contactSubmitBtn) {
            contactSubmitBtn.innerText = "Sending...";
            contactSubmitBtn.disabled = true;
          }
          if (contactStatus) {
            contactStatus.classList.remove("hidden");
            contactStatus.className = "text-sm font-medium text-slate-300";
            contactStatus.textContent = "Sending your message...";
          }

          try {
            const response = await fetch(contactEndpoint, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                name,
                email,
                message,
                company,
                source: window.location.href,
              }),
            });

            if (!response.ok) {
              throw new Error(`Contact API failed with status ${response.status}`);
            }

            if (contactStatus) {
              contactStatus.className = "text-sm font-medium text-emerald-300";
              contactStatus.textContent =
                "Message sent. Thanks for reaching out.";
            }
            contactForm.reset();
          } catch (error) {
            if (contactStatus) {
              contactStatus.className = "text-sm font-medium text-rose-300";
              contactStatus.innerHTML =
                'Unable to send right now. Please try again, or email <a href="mailto:josh@joshbarteaux.com" class="underline text-blue-300 hover:text-blue-200">josh@joshbarteaux.com</a>.';
            }
            console.error("Contact form submission error:", error);
          } finally {
            if (contactSubmitBtn) {
              contactSubmitBtn.innerText = "Send Message";
              contactSubmitBtn.disabled = false;
            }
          }
        });
      }

      /* -------------------------------------------------------------------------- */
      /* Chat Widget Logic                            */
      /* -------------------------------------------------------------------------- */
      const chatToggle = document.getElementById("chat-toggle");
      const chatWindow = document.getElementById("chat-window");
      const closeChat = document.getElementById("close-chat");
      const chatForm = document.getElementById("chat-form");
      const chatInput = document.getElementById("chat-input");
      const chatMessages = document.getElementById("chat-messages");

      // Toggle Visibility
      function toggleChat() {
        chatWindow.classList.toggle("hidden");
        if (!chatWindow.classList.contains("hidden")) {
          chatInput.focus();
        }
      }

      chatToggle.addEventListener("click", toggleChat);
      closeChat.addEventListener("click", toggleChat);

      // "AI" Knowledge Base
      const knowledgeBase = [
        {
          keywords: ["hello", "hi", "hey", "start"],
          response: {
            text: "I can help with skills, projects, availability, and contact details. Ask a specific question and I will give links where possible.",
            links: [
              { label: "View Projects", url: "#projects" },
              { label: "Contact Josh", url: "#contact" },
            ],
          },
        },
        {
          keywords: [
            "skill",
            "stack",
            "tech",
            "technologies",
            "tools",
            "language",
          ],
          response: {
            text: "Core stack: TypeScript, Python, Java. Test automation: Playwright, Selenium, Cypress. QA delivery: CI/CD with GitHub Actions/Jenkins and API testing with Postman/K6.",
            links: [{ label: "GitHub Profile", url: "https://github.com/murdadrum" }],
          },
        },
        {
          keywords: ["experience", "work", "history", "background", "senior"],
          response: {
            text: "Josh is a Senior SDET focused on scalable test frameworks, quality strategy, and CI pipeline optimization.",
            links: [{ label: "LinkedIn", url: "https://www.linkedin.com/in/joshbarteaux" }],
          },
        },
        {
          keywords: ["contact", "email", "hire", "reach", "contract"],
          response: {
            text: "Best contact options are email or LinkedIn. You can also use the contact form on this page.",
            links: [
              { label: "Email Josh", url: "mailto:josh@joshbarteaux.com" },
              { label: "LinkedIn", url: "https://www.linkedin.com/in/joshbarteaux" },
              { label: "Contact Form", url: "#contact" },
            ],
          },
        },
        {
          keywords: ["project", "case study", "portfolio"],
          response: {
            text: "Top live demos include VennDiachrome, Figma QA/DMS, and Promptly. Tell me which one you want and I can point you to it.",
            links: [
              { label: "VennDiachrome", url: "https://venndiachrome.figma.site" },
              { label: "Figma QA/DMS", url: "https://qadms.figma.site/" },
              { label: "Promptly", url: "https://promptly-779175721635.us-west1.run.app" },
            ],
          },
        },
        {
          keywords: ["playwright", "cypress", "selenium"],
          response: {
            text: "Playwright is the primary tool for modern web automation in this portfolio, while Selenium/Cypress experience supports legacy and mixed environments.",
            links: [{ label: "QA Repo", url: "https://github.com/murdadrum/QAPI" }],
          },
        },
        {
          keywords: ["resume", "cv"],
          response: {
            text: "You can download Josh's ATS resume directly.",
            links: [
              {
                label: "Download ATS Resume",
                url: "assets/ats-resume-placeholder.txt",
              },
              { label: "Contact Josh", url: "mailto:josh@joshbarteaux.com" },
            ],
          },
        },
      ];

      function findResponse(userText) {
        const lowerText = userText.toLowerCase();

        const match = knowledgeBase.find((entry) =>
          entry.keywords.some((keyword) => lowerText.includes(keyword)),
        );

        return (
          match?.response || {
            text: "I do not have that exact detail yet. Ask about skills, projects, resume, or contact and I will provide direct links.",
            links: [
              { label: "Projects", url: "#projects" },
              { label: "Contact", url: "#contact" },
              { label: "GitHub", url: "https://github.com/murdadrum" },
            ],
          }
        );
      }

      function escapeHtml(value) {
        return String(value)
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#39;");
      }

      function renderBotResponse(response) {
        const safeText = escapeHtml(response.text || "").replace(/\n/g, "<br />");
        const links = Array.isArray(response.links) ? response.links : [];
        const linksHtml = links
          .map((link) => {
            const label = escapeHtml(link.label || "Open");
            const url = escapeHtml(link.url || "#");
            const targetAttrs = /^(https?:|mailto:)/i.test(link.url || "")
              ? ' target="_blank" rel="noopener noreferrer"'
              : "";
            return `<a href="${url}"${targetAttrs} class="inline-flex items-center gap-1 px-2 py-1 rounded-md border border-slate-200 text-blue-600 hover:text-blue-700 hover:border-blue-300 transition text-xs font-semibold">${label}</a>`;
          })
          .join("");

        return `
          <div class="space-y-3">
            <p>${safeText}</p>
            ${linksHtml ? `<div class="flex flex-wrap gap-2">${linksHtml}</div>` : ""}
          </div>
        `;
      }

      // Handle Messages
      chatForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const userText = chatInput.value.trim();
        if (!userText) return;

        // 1. Add User Message
        addMessage(userText, "user");
        chatInput.value = "";

        // 2. Simulate Typing Delay
        showTypingIndicator();

        // 3. Generate AI Response
        setTimeout(
          () => {
            removeTypingIndicator();
            const response = findResponse(userText);
            addMessage(response, "bot");
          },
          1000 + Math.random() * 500,
        ); // Random delay between 1-1.5s
      });

      function addMessage(text, sender) {
        const div = document.createElement("div");
        const isBot = sender === "bot";

        div.className = `flex gap-3 ${isBot ? "" : "flex-row-reverse"}`;

        const avatar = isBot
          ? `<div class="w-8 h-8 rounded-full bg-blue-100 flex-shrink-0 flex items-center justify-center text-blue-600 text-xs"><i class="fa-solid fa-robot"></i></div>`
          : `<div class="w-8 h-8 rounded-full bg-slate-200 flex-shrink-0 flex items-center justify-center text-slate-500 text-xs"><i class="fa-solid fa-user"></i></div>`;

        const bubbleObj = isBot
          ? `bg-white border border-slate-100 rounded-tl-none text-slate-600`
          : `bg-blue-600 text-white rounded-tr-none`;

        const content = isBot ? renderBotResponse(text) : escapeHtml(text);

        div.innerHTML = `
                ${avatar}
                <div class="${bubbleObj} p-3 rounded-2xl shadow-sm text-sm max-w-[80%] animate-fade-in">
                    ${content}
                </div>
            `;

        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function showTypingIndicator() {
        const div = document.createElement("div");
        div.id = "typing-indicator";
        div.className = "flex gap-3";
        div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-blue-100 flex-shrink-0 flex items-center justify-center text-blue-600 text-xs"><i class="fa-solid fa-robot"></i></div>
                <div class="bg-white border border-slate-100 p-3 rounded-2xl rounded-tl-none shadow-sm text-slate-400 flex gap-1 items-center h-10">
                    <span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"></span>
                    <span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></span>
                    <span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></span>
                </div>
            `;
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function removeTypingIndicator() {
        const indicator = document.getElementById("typing-indicator");
        if (indicator) indicator.remove();
      }

      // Add fade-in animation style
      const style = document.createElement("style");
      style.innerHTML = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in {
                animation: fadeIn 0.3s ease-out forwards;
            }
        `;
      document.head.appendChild(style);
    </script>
  </body>
</html>
